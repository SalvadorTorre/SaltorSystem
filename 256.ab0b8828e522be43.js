"use strict";(self.webpackChunkSaltorSystem=self.webpackChunkSaltorSystem||[]).push([[256],{256:(G,p,s)=>{s.r(p),s.d(p,{ModuloCliente:()=>P});var u=s(177),h=s(8871),a=s(9417),C=s(4412),_=s(152),b=s(3294),f=s(5558),g=s(8032),d=s.n(g),e=s(8699),v=s(3290),F=s(333),k=s(9591);function j(r,c){if(1&r){const t=e.RV6();e.j41(0,"tr")(1,"td",52),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s(),e.j41(7,"td"),e.EFF(8),e.k0s(),e.j41(9,"td")(10,"div",53)(11,"button",54),e.bIt("click",function(){const o=e.eBV(t).$implicit,l=e.XpG();return e.Njj(l.editarCliente(o))}),e.nrm(12,"i",55),e.k0s(),e.j41(13,"button",56),e.bIt("click",function(){const o=e.eBV(t).$implicit,l=e.XpG();return e.Njj(l.eliminarCliente(o))}),e.nrm(14,"i",57),e.k0s(),e.j41(15,"button",58),e.bIt("click",function(){const o=e.eBV(t).$implicit,l=e.XpG();return e.Njj(l.consultarCliente(o))}),e.nrm(16,"i",59),e.k0s()()()()}if(2&r){const t=c.$implicit;e.R7$(2),e.JRh(t.cl_codClie),e.R7$(2),e.JRh(t.cl_nomClie),e.R7$(2),e.JRh(t.cl_telClie),e.R7$(2),e.JRh(t.cl_rnc)}}function T(r,c){if(1&r){const t=e.RV6();e.j41(0,"li",33)(1,"a",60),e.bIt("click",function(){const o=e.eBV(t).$implicit,l=e.XpG();return e.Njj(l.changePage(o))}),e.EFF(2),e.k0s()()}if(2&r){const t=c.$implicit,n=e.XpG();e.AVh("active",n.currentPage===t),e.R7$(2),e.JRh(t)}}function E(r,c){if(1&r&&(e.j41(0,"option",94),e.EFF(1),e.k0s()),2&r){const t=c.$implicit;e.Y8G("value",t.se_codSect),e.R7$(1),e.SpI(" ",t.se_desSect," ")}}function x(r,c){if(1&r&&(e.j41(0,"option",94),e.EFF(1),e.k0s()),2&r){const t=c.$implicit;e.Y8G("value",t.zo_codZona),e.R7$(1),e.SpI(" ",t.zo_descrip," ")}}function y(r,c){if(1&r&&(e.j41(0,"button",95),e.nrm(1,"i",96),e.EFF(2),e.k0s()),2&r){const t=e.XpG(2);e.R7$(2),e.SpI("",t.modoedicionCliente?"Actualizar":"Guardar"," ")}}function S(r,c){if(1&r){const t=e.RV6();e.j41(0,"div")(1,"form",61),e.bIt("ngSubmit",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.guardarCliente())}),e.j41(2,"div",62)(3,"div",63)(4,"div",7)(5,"input",64,65),e.bIt("input",function(i){e.eBV(t);const o=e.XpG();return e.Njj(o.convertToUpperCase(i))})("keydown",function(i){e.eBV(t);const o=e.sdS(12),l=e.XpG();return e.Njj(l.moveFocus(i,o))}),e.k0s(),e.j41(7,"label",66),e.EFF(8,"RNC"),e.k0s()()(),e.j41(9,"div",63)(10,"div",7)(11,"input",67,68),e.bIt("input",function(i){e.eBV(t);const o=e.XpG();return e.Njj(o.convertToUpperCase(i))})("keydown",function(i){e.eBV(t);const o=e.sdS(18),l=e.XpG();return e.Njj(l.moveFocus(i,o))}),e.k0s(),e.j41(13,"label",69),e.EFF(14,"Nombre"),e.k0s()()(),e.j41(15,"div",70)(16,"div",7)(17,"input",71,72),e.bIt("input",function(i){e.eBV(t);const o=e.XpG();return e.Njj(o.convertToUpperCase(i))})("keydown",function(i){e.eBV(t);const o=e.sdS(40),l=e.XpG();return e.Njj(l.moveFocus(i,o))}),e.k0s(),e.j41(19,"label",73),e.EFF(20,"Direcci\xf3n"),e.k0s()()(),e.j41(21,"div",63)(22,"div",7)(23,"select",74),e.bIt("change",function(i){e.eBV(t);const o=e.XpG();return e.Njj(o.onSectorChange(i))}),e.j41(24,"option",75),e.EFF(25,"Seleccione un Sector"),e.k0s(),e.DNE(26,E,2,2,"option",76),e.k0s(),e.j41(27,"label",77),e.EFF(28,"Sector"),e.k0s()()(),e.j41(29,"div",63)(30,"div",7)(31,"select",78)(32,"option",75),e.EFF(33,"Seleccione una Zona"),e.k0s(),e.DNE(34,x,2,2,"option",76),e.k0s(),e.j41(35,"label",79),e.EFF(36,"Zona"),e.k0s()()(),e.j41(37,"div",63)(38,"div",7)(39,"input",80,81),e.bIt("input",function(i){e.eBV(t);const o=e.XpG();return e.Njj(o.convertToUpperCase(i))})("keydown",function(i){e.eBV(t);const o=e.sdS(40),l=e.XpG();return e.Njj(l.moveFocus(i,o))}),e.k0s(),e.j41(41,"label",82),e.EFF(42,"Tel\xe9fono"),e.k0s()()(),e.j41(43,"div",63)(44,"div",7),e.nrm(45,"input",83),e.j41(46,"label",84),e.EFF(47,"Tipo"),e.k0s()()(),e.j41(48,"div",63)(49,"div",7)(50,"select",85)(51,"option",86),e.EFF(52,"Seleccione un estado"),e.k0s(),e.j41(53,"option",87),e.EFF(54,"Activo"),e.k0s(),e.j41(55,"option",88),e.EFF(56,"Inactivo"),e.k0s()(),e.j41(57,"label",89),e.EFF(58,"Estado"),e.k0s()()()(),e.j41(59,"div",90)(60,"button",91),e.nrm(61,"i",92),e.EFF(62,"Cancelar "),e.k0s(),e.DNE(63,y,3,1,"button",93),e.k0s()()()}if(2&r){const t=e.XpG();e.R7$(1),e.Y8G("formGroup",t.formularioCliente),e.R7$(25),e.Y8G("ngForOf",t.sectorList),e.R7$(5),e.Y8G("disabled",!0),e.R7$(3),e.Y8G("ngForOf",t.zonasList),e.R7$(29),e.Y8G("ngIf",!t.modoconsultaCliente)}}const w=[{path:"",component:(()=>{class r{constructor(t,n,i,o){this.fb=t,this.servicioCliente=n,this.servicioSector=i,this.servicioZona=o,this.habilitarBusqueda=!1,this.clienteList=[],this.zonasList=[],this.sectorList=[],this.modoedicionCliente=!1,this.habilitarFormulario=!1,this.modoconsultaCliente=!1,this.totalItems=0,this.pageSize=8,this.currentPage=1,this.maxPagesToShow=5,this.txtcodigo="",this.txtdescripcion="",this.codigo="",this.descripcion="",this.selectedCliente=null,this.idBuscar=new C.t(""),this.descripcionBuscar=new C.t(""),this.crearFormularioCliente(),this.descripcionBuscar.pipe((0,_.B)(1e3),(0,b.F)(),(0,f.n)(l=>(this.descripcion=l,this.servicioCliente.buscarTodosCliente(this.currentPage,this.pageSize,this.codigo,this.descripcion)))).subscribe(l=>{this.clienteList=l.data,this.totalItems=l.pagination.total,this.currentPage=l.pagination.page}),this.idBuscar.pipe((0,_.B)(500),(0,b.F)(),(0,f.n)(l=>(this.codigo=l,this.servicioCliente.buscarTodosCliente(this.currentPage,this.pageSize,this.codigo,this.descripcion)))).subscribe(l=>{this.clienteList=l.data,this.totalItems=l.pagination.total,this.currentPage=l.pagination.page})}seleccionarCliente(t){this.selectedCliente=t}ngOnInit(){this.buscarTodosCliente(1),this.buscardatosSector(),this.buscartodaZona()}crearFormularioCliente(){this.formularioCliente=this.fb.group({cl_nomClie:["",a.k0.required],cl_dirClie:[""],cl_codSect:[""],cl_codZona:[{value:"",disabled:!0}],cl_telClie:[""],cl_tipo:[""],cl_status:[!0],cl_rnc:[""]})}habilitarBuscador(){this.habilitarBusqueda=!1}nuevoCliente(){this.modoedicionCliente=!1,this.tituloModalCliente="Agregando Cliente",this.formularioCliente.reset(),this.crearFormularioCliente(),this.formularioCliente.patchValue({cl_status:!0}),this.formularioCliente.get("cl_codZona")?.disable(),$("#modalcliente").modal("show"),this.habilitarFormulario=!0}cerrarModalCliente(){this.habilitarFormulario=!1,this.formularioCliente.reset(),this.modoedicionCliente=!1,this.modoconsultaCliente=!1,$("#modalcliente").modal("hide"),this.crearFormularioCliente()}editarCliente(t){this.clienteid=t.cl_codClie,this.modoedicionCliente=!0,this.formularioCliente.enable(),this.formularioCliente.patchValue({cl_nomClie:(t.cl_nomClie||"").toUpperCase(),cl_dirClie:(t.cl_dirClie||"").toUpperCase(),cl_codSect:t.cl_codSect,cl_codZona:t.cl_codZona,cl_telClie:(t.cl_telClie||"").toUpperCase(),cl_tipo:t.cl_tipo,cl_status:!!t.cl_status,cl_rnc:t.cl_rnc}),this.formularioCliente.get("cl_codZona")?.disable(),this.tituloModalCliente="Editando Cliente",$("#modalcliente").modal("show"),this.habilitarFormulario=!0}buscarTodosCliente(t){this.servicioCliente.buscarTodosCliente(t,this.pageSize).subscribe(n=>{console.log(n),this.clienteList=n.data})}consultarCliente(t){this.tituloModalCliente="Consulta Cliente",this.formularioCliente.patchValue(t),$("#modalcliente").modal("show"),this.habilitarFormulario=!0,this.modoconsultaCliente=!0,this.formularioCliente.disable()}eliminarCliente(t){d().fire({title:"\xbfEst\xe1 seguro de eliminar este Cliente?",text:"\xa1No podr\xe1 revertir esto!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si, eliminar!"}).then(n=>{n.isConfirmed&&this.servicioCliente.eliminarCliente(t.cl_codClie).subscribe(i=>{d().fire({title:"Excelente!",text:"Cliente eliminado correctamente.",icon:"success",timer:3e3,showConfirmButton:!1}),this.buscarTodosCliente(this.currentPage)})})}descripcionEntra(t){this.descripcionBuscar.next(t.target.value.toUpperCase())}idEntra(t){this.idBuscar.next(t.target.value.toUpperCase())}onSectorChange(t){const i=Number(t.target.value);if(!isNaN(i)){const o=this.sectorList.find(l=>l.se_codSect===i);this.formularioCliente.patchValue(o?{cl_codZona:o.se_codZona}:{cl_codZona:""})}}guardarCliente(){if(console.log("aa",this.formularioCliente.value),this.formularioCliente.valid){const n={...this.formularioCliente.getRawValue(),cl_nomClie:(this.formularioCliente.value.cl_nomClie||"").toUpperCase(),cl_dirClie:(this.formularioCliente.value.cl_dirClie||"").toUpperCase(),cl_telClie:(this.formularioCliente.value.cl_telClie||"").toUpperCase()};this.modoedicionCliente?this.servicioCliente.editarCliente(this.clienteid,n).subscribe(i=>{d().fire({title:"Excelente!",text:"Cliente Editado correctamente.",icon:"success",timer:5e3,showConfirmButton:!1}),this.buscarTodosCliente(1),this.formularioCliente.reset(),this.crearFormularioCliente(),$("#modalcliente").modal("hide")}):this.servicioCliente.guardarCliente(n).subscribe(i=>{d().fire({title:"Excelente!",text:"Cliente Guardado correctamente.",icon:"success",timer:3e3,showConfirmButton:!1}),this.buscarTodosCliente(1),this.formularioCliente.reset(),this.crearFormularioCliente(),$("#modalcliente").modal("hide")})}else alert("Este Cliente no fue Guardado")}buscarTodoCliente(t){throw new Error("Method not implemented.")}convertToUpperCase(t){const n=t.target,i=n.selectionStart,o=n.selectionEnd;n.value=n.value.toUpperCase(),null!==i&&null!==o&&n.setSelectionRange(i,o)}moveFocus(t,n){"Enter"===t.key&&n&&(t.preventDefault(),n.focus())}changePage(t){this.currentPage=t;const n=this.idBuscar.getValue(),i=this.descripcionBuscar.getValue();this.servicioCliente.buscarTodosCliente(this.currentPage,this.pageSize,n,i).subscribe(o=>{this.clienteList=o.data,this.totalItems=o.pagination.total,this.currentPage=t})}get totalPages(){return Math.ceil(this.totalItems/this.pageSize)}get pages(){const t=this.totalPages,n=this.currentPage,i=this.maxPagesToShow;if(t<=i)return Array.from({length:t},(B,m)=>m+1);const o=Math.max(1,n-Math.floor(i/2)),l=Math.min(t,o+i-1);return Array.from({length:l-o+1},(B,m)=>o+m)}limpiaBusqueda(){this.txtdescripcion="",this.txtcodigo="",this.buscarTodosCliente(1)}buscartodaZona(){this.servicioZona.obtenerTodasZonas().subscribe(t=>{console.log(t),this.zonasList=t.data})}buscardatosSector(){this.servicioSector.obtenerTodosSector().subscribe(t=>{console.log(t),this.sectorList=t.data})}static{this.\u0275fac=function(n){return new(n||r)(e.rXU(a.ok),e.rXU(v.d),e.rXU(F.V),e.rXU(k.x))}}static{this.\u0275cmp=e.VBU({type:r,selectors:[["Cliente"]],decls:71,vars:14,consts:[[1,"card","shadow-sm","h-100"],[1,"card-header","bg-primary","text-white","d-flex","justify-content-between","align-items-center"],[1,"h3","mb-0"],[1,"bi","bi-people-fill","me-2"],[1,"card-body"],[1,"row","g-3","mb-4"],[1,"col-12","col-md-4","col-lg-3"],[1,"form-floating"],["type","text","id","searchCode","placeholder","Digite c\xf3digo",1,"form-control",3,"ngModel","ngModelChange","input"],["for","searchCode"],[1,"col-12","col-md-5","col-lg-4"],["type","text","id","searchName","placeholder","Digite el Nombre...",1,"form-control",3,"ngModel","ngModelChange","input"],["for","searchName"],[1,"col-12","col-md-3","col-lg-5"],[1,"d-flex","gap-2","h-100","align-items-center"],[1,"btn","btn-danger","d-flex","align-items-center",3,"click"],[1,"bi","bi-arrow-counterclockwise","me-1"],[1,"d-none","d-sm-inline"],[1,"btn","btn-primary","d-flex","align-items-center",3,"click"],[1,"bi","bi-plus-circle","me-1"],[1,"table-responsive"],[1,"card","shadow-sm","border-0"],[1,"card-body","p-0"],[1,"table","table-hover","table-striped","mb-0"],[1,"bg-light"],[1,"text-center",2,"width","10%"],[2,"width","35%"],[2,"width","15%"],[1,"text-center",2,"width","15%"],[4,"ngFor","ngForOf"],[1,"d-flex","justify-content-center","mt-3"],["aria-label","Page navigation"],[1,"pagination","pagination-sm","flex-wrap","justify-content-center"],[1,"page-item"],["aria-label","First",1,"page-link",3,"click"],[1,"bi","bi-chevron-double-left"],["aria-label","Previous",1,"page-link",3,"click"],[1,"bi","bi-chevron-left"],["class","page-item",3,"active",4,"ngFor","ngForOf"],["aria-label","Next",1,"page-link",3,"click"],[1,"bi","bi-chevron-right"],["aria-label","Last",1,"page-link",3,"click"],[1,"bi","bi-chevron-double-right"],["id","modalcliente","tabindex","-1","aria-labelledby","modalClienteLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-lg","modal-dialog-centered","modal-dialog-scrollable"],[1,"modal-content"],[1,"modal-header","bg-primary","text-white"],["id","modalClienteLabel",1,"modal-title"],[1,"bi","bi-person-plus-fill","me-2"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close","btn-close-white"],[1,"modal-body"],[4,"ngIf"],[1,"text-center","fw-bold"],[1,"d-flex","justify-content-center","gap-2"],["title","Editar cliente",1,"btn","btn-sm","btn-outline-primary",3,"click"],[1,"bi","bi-pencil"],["title","Eliminar cliente",1,"btn","btn-sm","btn-outline-danger",3,"click"],[1,"bi","bi-trash"],["title","Ver detalles",1,"btn","btn-sm","btn-outline-success",3,"click"],[1,"bi","bi-card-list"],[1,"page-link",3,"click"],[1,"needs-validation",3,"formGroup","ngSubmit"],[1,"row","g-3"],[1,"col-md-6"],["type","number","id","cl_rnc","formControlName","cl_rnc","placeholder","RNC",1,"form-control","uppercase-input",3,"input","keydown"],["input1",""],["for","cl_rnc"],["type","text","id","cl_nomClie","formControlName","cl_nomClie","placeholder","Nombre",1,"form-control","uppercase-input",3,"input","keydown"],["input2",""],["for","cl_nomClie"],[1,"col-12"],["type","text","id","cl_dirClie","formControlName","cl_dirClie","placeholder","Direcci\xf3n",1,"form-control","uppercase-input",3,"input","keydown"],["input3",""],["for","cl_dirClie"],["formControlName","cl_codSect","id","cl_codSect",1,"form-select",3,"change"],["disabled","","selected","","value",""],[3,"value",4,"ngFor","ngForOf"],["for","cl_codSect"],["formControlName","cl_codZona","id","cl_codZona",1,"form-select",3,"disabled"],["for","cl_codZona"],["type","text","id","cl_telClie","formControlName","cl_telClie","appPhoneNumberMask","","placeholder","Tel\xe9fono",1,"form-control","uppercase-input",3,"input","keydown"],["input5",""],["for","cl_telClie"],["id","cl_tipo","formControlName","cl_tipo","placeholder","Tipo",1,"form-control"],["for","cl_tipo"],["formControlName","cl_status","id","cl_status",1,"form-select"],["value","","disabled","","selected",""],["value","1"],["value","0"],["for","cl_status"],[1,"d-flex","justify-content-end","mt-4"],["type","button","data-bs-dismiss","modal",1,"btn","btn-outline-secondary","me-2"],[1,"bi","bi-x-circle","me-1"],["type","submit","class","btn btn-success",4,"ngIf"],[3,"value"],["type","submit",1,"btn","btn-success"],[1,"bi","bi-check-circle","me-1"]],template:function(n,i){1&n&&(e.j41(0,"div",0)(1,"div",1)(2,"h1",2),e.nrm(3,"i",3),e.EFF(4,"Gesti\xf3n de Clientes"),e.k0s()(),e.j41(5,"div",4)(6,"div",5)(7,"div",6)(8,"div",7)(9,"input",8),e.bIt("ngModelChange",function(l){return i.txtcodigo=l})("input",function(l){return i.idEntra(l)}),e.k0s(),e.j41(10,"label",9),e.EFF(11,"Buscar por C\xf3digo"),e.k0s()()(),e.j41(12,"div",10)(13,"div",7)(14,"input",11),e.bIt("ngModelChange",function(l){return i.txtdescripcion=l})("input",function(l){return i.descripcionEntra(l)}),e.k0s(),e.j41(15,"label",12),e.EFF(16,"Buscar por Nombre"),e.k0s()()(),e.j41(17,"div",13)(18,"div",14)(19,"button",15),e.bIt("click",function(){return i.limpiaBusqueda()}),e.nrm(20,"i",16),e.j41(21,"span",17),e.EFF(22,"Limpiar"),e.k0s()(),e.j41(23,"button",18),e.bIt("click",function(){return i.nuevoCliente()}),e.nrm(24,"i",19),e.j41(25,"span"),e.EFF(26,"Nuevo Cliente"),e.k0s()()()()(),e.j41(27,"div",20)(28,"div",21)(29,"div",22)(30,"table",23)(31,"thead",24)(32,"tr")(33,"th",25),e.EFF(34,"C\xf3digo"),e.k0s(),e.j41(35,"th",26),e.EFF(36,"Nombre"),e.k0s(),e.j41(37,"th",27),e.EFF(38,"Tel\xe9fono"),e.k0s(),e.j41(39,"th",27),e.EFF(40,"RNC"),e.k0s(),e.j41(41,"th",28),e.EFF(42,"Acciones"),e.k0s()()(),e.j41(43,"tbody"),e.DNE(44,j,17,4,"tr",29),e.k0s()()()()(),e.j41(45,"div",30)(46,"nav",31)(47,"ul",32)(48,"li",33)(49,"a",34),e.bIt("click",function(){return i.changePage(1)}),e.nrm(50,"i",35),e.k0s()(),e.j41(51,"li",33)(52,"a",36),e.bIt("click",function(){return i.changePage(i.currentPage-1)}),e.nrm(53,"i",37),e.k0s()(),e.DNE(54,T,3,3,"li",38),e.j41(55,"li",33)(56,"a",39),e.bIt("click",function(){return i.changePage(i.currentPage+1)}),e.nrm(57,"i",40),e.k0s()(),e.j41(58,"li",33)(59,"a",41),e.bIt("click",function(){return i.changePage(i.totalPages)}),e.nrm(60,"i",42),e.k0s()()()()(),e.j41(61,"div",43)(62,"div",44)(63,"div",45)(64,"div",46)(65,"h5",47),e.nrm(66,"i",48),e.EFF(67),e.k0s(),e.nrm(68,"button",49),e.k0s(),e.j41(69,"div",50),e.DNE(70,S,64,5,"div",51),e.k0s()()()()()()),2&n&&(e.R7$(9),e.Y8G("ngModel",i.txtcodigo),e.R7$(5),e.Y8G("ngModel",i.txtdescripcion),e.R7$(30),e.Y8G("ngForOf",i.clienteList),e.R7$(4),e.AVh("disabled",1===i.currentPage),e.R7$(3),e.AVh("disabled",1===i.currentPage),e.R7$(3),e.Y8G("ngForOf",i.pages),e.R7$(1),e.AVh("disabled",i.currentPage===i.totalPages),e.R7$(3),e.AVh("disabled",i.currentPage===i.totalPages),e.R7$(9),e.SpI("",i.tituloModalCliente," "),e.R7$(3),e.Y8G("ngIf",i.habilitarFormulario))},dependencies:[u.Sq,u.bT,a.qT,a.xH,a.y7,a.me,a.Q0,a.wz,a.BC,a.cb,a.j4,a.JD,a.vS],styles:[".form-container[_ngcontent-%COMP%]{background-color:#fcfeff;padding:20px;border-radius:10px;box-shadow:0 2px 5px #0000001a}.form-group[_ngcontent-%COMP%]{margin-bottom:15px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:700}.form-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;flex-wrap:wrap}.form-row[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{flex:0 0 48%}.table-responsive[_ngcontent-%COMP%]{max-height:400px;overflow-y:auto}"]})}}return r})()}];let N=(()=>{class r{static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275mod=e.$C({type:r})}static{this.\u0275inj=e.G2t({imports:[h.iI.forChild(w),h.iI]})}}return r})(),P=(()=>{class r{static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275mod=e.$C({type:r})}static{this.\u0275inj=e.G2t({imports:[u.MD,N,a.X1,a.YN]})}}return r})()}}]);