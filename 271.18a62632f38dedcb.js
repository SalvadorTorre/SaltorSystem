"use strict";(self.webpackChunkSaltorSystem=self.webpackChunkSaltorSystem||[]).push([[271],{5271:(Q,b,p)=>{p.r(b),p.d(b,{ModuloEmpresas:()=>z});var h=p(177),_=p(8871),c=p(9417),g=p(4412),v=p(152),S=p(3294),j=p(5558),C=p(8032),u=p.n(C),e=p(8699),N=p(2265),y=p(3149),R=p(8527),x=p(5353);function I(i,m){if(1&i){const t=e.RV6();e.j41(0,"tr")(1,"td",104),e.EFF(2),e.k0s(),e.j41(3,"td",15),e.EFF(4),e.k0s(),e.j41(5,"td",105),e.EFF(6),e.k0s(),e.j41(7,"td",15),e.EFF(8),e.k0s(),e.j41(9,"td",106),e.EFF(10),e.k0s(),e.j41(11,"td",15)(12,"div",107)(13,"button",108),e.bIt("click",function(){const s=e.eBV(t).$implicit,o=e.XpG();return e.Njj(o.consultarEmpresa(s))}),e.nrm(14,"i",109),e.k0s(),e.j41(15,"button",110),e.bIt("click",function(){const s=e.eBV(t).$implicit,o=e.XpG();return e.Njj(o.editarEmpresa(s))}),e.nrm(16,"i",111),e.k0s(),e.j41(17,"button",112),e.bIt("click",function(){const s=e.eBV(t).$implicit,o=e.XpG();return e.Njj(o.eliminarEmpresa(s.cod_empre))}),e.nrm(18,"i",113),e.k0s()()()()}if(2&i){const t=m.$implicit;e.R7$(2),e.JRh(t.cod_empre),e.R7$(2),e.JRh(t.rnc_empre),e.R7$(2),e.JRh(t.nom_empre),e.R7$(2),e.JRh(t.tel_empre),e.R7$(2),e.JRh(t.dir_empre)}}function M(i,m){1&i&&(e.j41(0,"tr")(1,"td",114),e.nrm(2,"i",115),e.EFF(3," No se encontraron empresas registradas "),e.k0s()())}function T(i,m){if(1&i){const t=e.RV6();e.j41(0,"li",23)(1,"a",116),e.bIt("click",function(){const s=e.eBV(t).$implicit,o=e.XpG();return e.Njj(o.changePage(s))}),e.EFF(2),e.k0s()()}if(2&i){const t=m.$implicit,a=e.XpG();e.AVh("active",a.currentPage===t),e.R7$(2),e.JRh(t)}}function w(i,m){if(1&i&&(e.j41(0,"button",117),e.EFF(1),e.k0s()),2&i){const t=e.XpG();e.R7$(1),e.SpI(" ",t.modoedicionEmpresa?"Guardar Cambio":"Guardar"," ")}}function P(i,m){if(1&i){const t=e.RV6();e.j41(0,"button",134),e.bIt("click",function(){e.eBV(t);const r=e.XpG(2);return e.Njj(r.abrirModalNuevaSucursal())}),e.nrm(1,"i",135),e.EFF(2," Agregar sucursal "),e.k0s()}}function B(i,m){if(1&i){const t=e.RV6();e.qex(0),e.j41(1,"button",141),e.bIt("click",function(r){e.eBV(t);const s=e.XpG().$implicit,o=e.XpG(2);return r.stopPropagation(),e.Njj(o.abrirModalEditarSucursal(s))}),e.nrm(2,"i",142),e.k0s(),e.j41(3,"button",143),e.bIt("click",function(r){e.eBV(t);const s=e.XpG().$implicit,o=e.XpG(2);return r.stopPropagation(),e.Njj(o.abrirContFacturaModal(s))}),e.nrm(4,"i",144),e.k0s(),e.j41(5,"button",145),e.bIt("click",function(r){e.eBV(t);const s=e.XpG().$implicit,o=e.XpG(2);return r.stopPropagation(),e.Njj(o.eliminarSucursal(s.cod_sucursal))}),e.nrm(6,"i",146),e.k0s(),e.bVm()}}function A(i,m){}function G(i,m){if(1&i){const t=e.RV6();e.j41(0,"tr",136),e.bIt("click",function(){const s=e.eBV(t).$implicit,o=e.XpG(2);return e.Njj(o.modoconsultaEmpresa&&o.mostrarDetalleSucursal(s))}),e.j41(1,"td",15),e.EFF(2),e.k0s(),e.j41(3,"td",137),e.EFF(4),e.k0s(),e.j41(5,"td",137),e.EFF(6),e.k0s(),e.j41(7,"td",137),e.EFF(8),e.k0s(),e.j41(9,"td",15),e.EFF(10),e.k0s(),e.j41(11,"td",138),e.EFF(12),e.k0s(),e.j41(13,"td"),e.DNE(14,B,7,0,"ng-container",139),e.DNE(15,A,0,0,"ng-template",null,140,e.C5r),e.k0s()()}if(2&i){const t=m.$implicit,a=e.sdS(16),r=e.XpG(2);let s,o;e.xc7("cursor",r.modoconsultaEmpresa?"pointer":"default"),e.R7$(2),e.JRh(t.cod_sucursal),e.R7$(2),e.JRh(t.nom_sucursal),e.R7$(2),e.JRh(t.tel_sucursal),e.R7$(2),e.JRh(t.dir_sucursal),e.R7$(2),e.JRh(null!==(s=null==r.contfacturaPorSucursal[t.cod_sucursal]?null:r.contfacturaPorSucursal[t.cod_sucursal].ano)&&void 0!==s?s:"-"),e.R7$(2),e.JRh(null!==(o=null==r.contfacturaPorSucursal[t.cod_sucursal]?null:r.contfacturaPorSucursal[t.cod_sucursal].contador)&&void 0!==o?o:"-"),e.R7$(2),e.Y8G("ngIf",r.modoedicionEmpresa)("ngIfElse",a)}}function D(i,m){if(1&i){const t=e.RV6();e.j41(0,"button",134),e.bIt("click",function(){e.eBV(t);const r=e.XpG(2);return e.Njj(r.agregarEncfEmpresa())}),e.nrm(1,"i",135),e.EFF(2," Agregar ENCF "),e.k0s()}}function V(i,m){if(1&i){const t=e.RV6();e.j41(0,"button",145),e.bIt("click",function(){e.eBV(t);const r=e.XpG().$implicit,s=e.XpG(2);return e.Njj(s.abrirEditarEncf(r))}),e.nrm(1,"i",148),e.EFF(2," Editar"),e.k0s()}}function L(i,m){if(1&i){const t=e.RV6();e.j41(0,"tr")(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td",138),e.EFF(6),e.k0s(),e.j41(7,"td",138),e.EFF(8),e.k0s(),e.j41(9,"td"),e.EFF(10),e.nI1(11,"date"),e.k0s(),e.j41(12,"td",138),e.EFF(13),e.k0s(),e.j41(14,"td")(15,"button",145),e.bIt("click",function(){const s=e.eBV(t).$implicit,o=e.XpG(2);return e.Njj(o.abrirDetalleEncf(s))}),e.nrm(16,"i",109),e.EFF(17," Ver"),e.k0s(),e.DNE(18,V,3,0,"button",147),e.k0s()()}if(2&i){const t=m.$implicit,a=e.XpG(2);e.R7$(2),e.JRh(a.tipoDescripcion(null==t?null:t.tipoencf)),e.R7$(2),e.Lme("",null==t?null:t.desdeencf," - ",null==t?null:t.hastaencf,""),e.R7$(2),e.JRh(null==t?null:t.cantencf),e.R7$(2),e.JRh(null==t?null:t.countencf),e.R7$(2),e.JRh(e.i5U(11,8,null==t?null:t.fechaencf,"dd/MM/yyyy")),e.R7$(3),e.JRh(null==t?null:t.alertaencf),e.R7$(5),e.Y8G("ngIf",a.modoedicionEmpresa)}}function O(i,m){1&i&&(e.j41(0,"tr")(1,"td",149),e.EFF(2,"No hay registros ENC-F para esta empresa"),e.k0s()())}function Y(i,m){if(1&i&&(e.j41(0,"div",118)(1,"div",39)(2,"div",119)(3,"h6",41),e.EFF(4,"Sucursales"),e.k0s(),e.DNE(5,P,3,0,"button",120),e.k0s(),e.j41(6,"div",121)(7,"table",122)(8,"thead",123)(9,"tr")(10,"th",124),e.EFF(11,"Codigo"),e.k0s(),e.j41(12,"th",125),e.EFF(13,"Sucursal"),e.k0s(),e.j41(14,"th",126),e.EFF(15,"Telefono"),e.k0s(),e.j41(16,"th",127),e.EFF(17,"Direcci\xf3n"),e.k0s(),e.j41(18,"th",126),e.EFF(19,"A\xf1o"),e.k0s(),e.j41(20,"th",126),e.EFF(21,"Secuencia"),e.k0s(),e.j41(22,"th",128),e.EFF(23,"Acciones"),e.k0s()()(),e.j41(24,"tbody"),e.DNE(25,G,17,10,"tr",129),e.k0s()()()(),e.j41(26,"div",118)(27,"div",39)(28,"div",119)(29,"h6",41),e.EFF(30,"ENC-F de la Empresa"),e.k0s(),e.DNE(31,D,3,0,"button",120),e.k0s(),e.j41(32,"div",130)(33,"div",131)(34,"table",122)(35,"thead",123)(36,"tr")(37,"th",125),e.EFF(38,"Tipo"),e.k0s(),e.j41(39,"th",132),e.EFF(40,"Rango"),e.k0s(),e.j41(41,"th",126),e.EFF(42,"Cantidad"),e.k0s(),e.j41(43,"th",133),e.EFF(44,"Contador"),e.k0s(),e.j41(45,"th",126),e.EFF(46,"Fecha"),e.k0s(),e.j41(47,"th",126),e.EFF(48,"Alerta (%)"),e.k0s(),e.j41(49,"th",125),e.EFF(50,"Acciones"),e.k0s()()(),e.j41(51,"tbody"),e.DNE(52,L,19,11,"tr",19),e.DNE(53,O,3,0,"tr",20),e.k0s()()()()()()()),2&i){const t=e.XpG();e.R7$(5),e.Y8G("ngIf",t.modoedicionEmpresa),e.R7$(20),e.Y8G("ngForOf",t.sucursalList),e.R7$(6),e.Y8G("ngIf",t.modoedicionEmpresa),e.R7$(21),e.Y8G("ngForOf",t.encfList),e.R7$(1),e.Y8G("ngIf",0===t.encfList.length)}}function X(i,m){if(1&i&&(e.j41(0,"div",36)(1,"div",79)(2,"strong"),e.EFF(3,"C\xf3digo:"),e.k0s(),e.EFF(4),e.k0s(),e.j41(5,"div",79)(6,"strong"),e.EFF(7,"Nombre:"),e.k0s(),e.EFF(8),e.k0s(),e.j41(9,"div",79)(10,"strong"),e.EFF(11,"Tel\xe9fono:"),e.k0s(),e.EFF(12),e.k0s(),e.j41(13,"div",79)(14,"strong"),e.EFF(15,"Direcci\xf3n:"),e.k0s(),e.EFF(16),e.k0s(),e.j41(17,"div",79)(18,"strong"),e.EFF(19,"A\xf1o:"),e.k0s(),e.EFF(20),e.k0s(),e.j41(21,"div",79)(22,"strong"),e.EFF(23,"Secuencia:"),e.k0s(),e.EFF(24),e.k0s()()),2&i){const t=m.ngIf,a=e.XpG();let r,s;e.R7$(4),e.SpI(" ",t.cod_sucursal,""),e.R7$(4),e.SpI(" ",t.nom_sucursal,""),e.R7$(4),e.SpI(" ",t.tel_sucursal,""),e.R7$(4),e.SpI(" ",t.dir_sucursal,""),e.R7$(4),e.SpI(" ",null!==(r=null==a.detalleCont?null:a.detalleCont.ano)&&void 0!==r?r:"-",""),e.R7$(4),e.SpI(" ",null!==(s=null==a.detalleCont?null:a.detalleCont.contador)&&void 0!==s?s:"-","")}}function J(i,m){if(1&i&&(e.j41(0,"div",36)(1,"div",79)(2,"strong"),e.EFF(3,"Tipo:"),e.k0s(),e.EFF(4),e.k0s(),e.j41(5,"div",79)(6,"strong"),e.EFF(7,"Rango:"),e.k0s(),e.EFF(8),e.k0s(),e.j41(9,"div",79)(10,"strong"),e.EFF(11,"Cantidad:"),e.k0s(),e.EFF(12),e.k0s(),e.j41(13,"div",79)(14,"strong"),e.EFF(15,"Contador:"),e.k0s(),e.EFF(16),e.k0s(),e.j41(17,"div",79)(18,"strong"),e.EFF(19,"Fecha:"),e.k0s(),e.EFF(20),e.nI1(21,"date"),e.k0s(),e.j41(22,"div",79)(23,"strong"),e.EFF(24,"Alerta (%):"),e.k0s(),e.EFF(25),e.k0s()()),2&i){const t=m.ngIf,a=e.XpG();e.R7$(4),e.SpI(" ",a.tipoDescripcion(null==t?null:t.tipoencf),""),e.R7$(4),e.Lme(" ",null==t?null:t.desdeencf," - ",null==t?null:t.hastaencf,""),e.R7$(4),e.SpI(" ",null==t?null:t.cantencf,""),e.R7$(4),e.SpI(" ",null==t?null:t.countencf,""),e.R7$(4),e.SpI(" ",e.i5U(21,7,null==t?null:t.fechaencf,"dd/MM/yyyy"),""),e.R7$(5),e.SpI(" ",null==t?null:t.alertaencf,"")}}const U=[{path:"",component:(()=>{class i{constructor(t,a,r,s,o){this.fb=t,this.servicioEmpresa=a,this.servicioSucursal=r,this.contSrv=s,this.servicioEncf=o,this.totalItems=0,this.pageSize=8,this.currentPage=1,this.maxPagesToShow=5,this.txtdescripcion="",this.txtcodigo="",this.rnc="",this.descripcion="",this.nomempresa="",this.codigo="",this.descripcionBuscar=new g.t(""),this.codigoBuscar=new g.t(""),this.habilitarFormulario=!1,this.modoedicionEmpresa=!1,this.modoconsultaEmpresa=!1,this.empresaList=[],this.sucursalList=[],this.activatablaSucursal=!1,this.activaformularioSucursal=!1,this.selectedEmpresa=null,this.modoedicionSucursal=!1,this.contfacturaActual={idsucursal:void 0,ano:(new Date).getFullYear(),contador:0},this.contfacturaEditId=null,this.contSucursalNombre="",this.contfacturaPorSucursal={},this.sucursalDetalle=null,this.detalleCont=null,this.encfList=[],this.encfSeleccionado=null,this.encfEditId=null,this.sucursalEditId=null,this.crearFormularioEmpresa(),this.crearformularioSucursal(),this.crearFormularioEncf(),this.codigoBuscar.pipe((0,v.B)(500),(0,S.F)(),(0,j.n)(n=>(this.codigo=n,this.servicioEmpresa.buscarEmpresa(this.currentPage,this.pageSize,this.nomempresa))))}buildEmpresaPayload(t){const a=t?.orden_compra,r=""===a||null==a?0:Number(a),s=String(t?.letra_empre??"").trim().toUpperCase(),o=String(t?.tel_empre||"").replace(/\D+/g,"").trim();return{cod_empre:String(t?.cod_empre||"").trim().toUpperCase(),rnc_empre:String(t?.rnc_empre??"").trim(),nom_empre:String(t?.nom_empre||"").trim().toUpperCase(),dir_empre:String(t?.dir_empre||"").trim().toUpperCase(),tel_empre:o,letra_empre:s?s[0]:"",orden_compra:isNaN(r)?0:r}}agregarSucursal(){this.formularioEmpresa.disable(),this.activaformularioSucursal=!0}cancelarSucursal(){this.activaformularioSucursal=!1,this.crearformularioSucursal(),this.formularioSucursal.reset(),this.formularioEmpresa.enable(),this.formularioEmpresa.reset()}crearformularioSucursal(){this.formularioSucursal=this.fb.group({cod_empre:[""],nom_sucursal:["",c.k0.required],dir_sucursal:["",c.k0.required],tel_sucursal:["",c.k0.required]})}crearFormularioEncf(){this.formEncf=this.fb.group({id:[null],codempr:["",c.k0.required],tipoencf:["",c.k0.required],desdeencf:[0,[c.k0.min(0)]],hastaencf:[0,[c.k0.min(0)]],cantencf:[0,[c.k0.min(0)]],countencf:[0,[c.k0.min(0)]],fechaencf:["",c.k0.required],alertaencf:[0,[c.k0.min(0)]]})}seleccionarEmpresa(t){this.selectedEmpresa=i}ngOnInit(){this.buscarTodasEmpresa(1)}crearFormularioEmpresa(){this.formularioEmpresa=this.fb.group({cod_empre:["",c.k0.required],rnc_empre:["",c.k0.required],nom_empre:["",c.k0.required],dir_empre:["",c.k0.required],tel_empre:["",c.k0.required],letra_empre:[""],orden_compra:[""]})}habilitarFormularioEmpresa(){this.habilitarFormulario=!1}nuevaEmpresa(){this.modoedicionEmpresa=!1,this.tituloModalEmpresa="Agregando Empresa",$("#modalempresa").modal("show"),this.habilitarFormulario=!0,this.activatablaSucursal=!1}cerrarModalEmpresa(){this.habilitarFormulario=!1,this.formularioEmpresa.reset(),this.modoedicionEmpresa=!1,this.modoconsultaEmpresa=!1,this.activatablaSucursal=!1,this.activaformularioSucursal=!1,$("#modalempresa").modal("hide"),this.crearFormularioEmpresa(),this.sucursalList=[],this.contfacturaActual={idsucursal:void 0,ano:(new Date).getFullYear(),contador:0},this.contfacturaEditId=null,this.contSucursalNombre="",this.contfacturaPorSucursal={}}editarSucursal(t){this.empresaid=t.cod_empre,this.modoedicionSucursal=!0,this.activatablaSucursal=!1,this.formularioEmpresa.patchValue(t),this.activaformularioSucursal=!1}editarEmpresa(t){this.empresaid=t.cod_empre,this.modoedicionEmpresa=!0,this.activatablaSucursal=!0,this.formularioEmpresa.patchValue(t),this.tituloModalEmpresa="Editando Empresa",$("#modalempresa").modal("show"),this.habilitarFormulario=!0,this.activaformularioSucursal=!1,this.activatablaSucursal=!0,this.sucursalList=t.sucursales||[],this.cargarContadoresSucursales(),this.cargarEncfEmpresa(this.empresaid),this.servicioEmpresa.buscarEmpres(this.empresaid).subscribe({next:a=>{const r=a?.data,s=Array.isArray(r)?r[0]:r;s&&(this.sucursalList=s.sucursales||s.sucursal||[],this.formularioEmpresa.patchValue(s),this.cargarContadoresSucursales(),this.cargarEncfEmpresa(this.empresaid))},error:()=>{this.sucursalList=t.sucursales||[],this.cargarContadoresSucursales(),this.cargarEncfEmpresa(this.empresaid)}})}buscarTodasEmpresa(t){this.servicioEmpresa.buscarTodasEmpresa(t,this.pageSize).subscribe(a=>{this.empresaList=a.data})}consultarEmpresa(t){this.tituloModalEmpresa="Consulta Empresa",this.formularioEmpresa.patchValue(t),$("#modalempresa").modal("show"),this.habilitarFormulario=!0,this.modoconsultaEmpresa=!0,this.formularioEmpresa.disable(),this.empresaid=t.cod_empre,this.activaformularioSucursal=!1,this.activatablaSucursal=!0,this.sucursalList=t.sucursales||[],this.cargarContadoresSucursales(),this.cargarEncfEmpresa(this.empresaid),this.servicioEmpresa.buscarEmpres(this.empresaid).subscribe({next:a=>{const r=a?.data,s=Array.isArray(r)?r[0]:r;s&&(this.sucursalList=s.sucursales||s.sucursal||[],this.formularioEmpresa.patchValue(s),this.cargarContadoresSucursales(),this.cargarEncfEmpresa(this.empresaid))},error:()=>{this.sucursalList=t.sucursales||[],this.cargarContadoresSucursales(),this.cargarEncfEmpresa(this.empresaid)}})}abrirContFacturaModal(t){const a=Number(t?.cod_sucursal);a&&!isNaN(a)?(this.contSucursalNombre=String(t?.nom_sucursal||""),this.contfacturaActual={idsucursal:a,ano:(new Date).getFullYear(),contador:0},this.contfacturaEditId=null,this.contSrv.buscarTodos(1,200,void 0).subscribe({next:r=>{const o=(Array.isArray(r?.data)?r.data:[]).filter(d=>Number(d?.idsucursal||d?.sucursal?.cod_sucursal)===a),n=(new Date).getFullYear(),l=o.find(d=>Number(d?.ano)===n)||o[0];if(l){const d=Number(l?.id||l?.cod);this.contfacturaEditId=isNaN(d)?null:d,this.contfacturaActual={idsucursal:Number(l?.idsucursal??l?.sucursal?.cod_sucursal??a),ano:Number(l?.ano??n),contador:Number(l?.contador??0)}}else this.contfacturaEditId=null,this.contfacturaActual={idsucursal:a,ano:n,contador:0};$("#contFacModalEmpresa").modal("show")},error:()=>{$("#contFacModalEmpresa").modal("show")}})):u().fire({title:"Aviso",text:"Sucursal inv\xe1lida para control de factura.",icon:"warning"})}guardarContFacturaEmpresa(t){const a={idsucursal:Number(this.contfacturaActual.idsucursal),ano:Number(this.contfacturaActual.ano),contador:Number(this.contfacturaActual.contador)};a.idsucursal&&!isNaN(a.idsucursal)?this.contSrv.buscarTodos(1,500,void 0).subscribe({next:r=>{const n=(Array.isArray(r?.data)?r.data:[]).filter(d=>Number(d?.idsucursal||d?.sucursal?.cod_sucursal)===a.idsucursal).find(d=>Number(d?.ano)===a.ano),l=Number(n?.id||n?.cod);n&&!isNaN(l)?this.contSrv.editarContFactura(l,a).subscribe({next:()=>{u().fire({title:"Excelente!",text:"Control de factura actualizado.",icon:"success",timer:3e3,showConfirmButton:!1}),this.contfacturaEditId=l,this.cargarContadoresSucursales()},error:d=>{const f=(d?.error?.message||d?.message||"Error al actualizar el control de factura").toString();u().fire({title:"Error",text:f,icon:"error"})}}):this.contSrv.guardarContFactura(a).subscribe({next:()=>{u().fire({title:"Excelente!",text:"Control de factura creado.",icon:"success",timer:3e3,showConfirmButton:!1}),this.cargarContadoresSucursales()},error:d=>{const f=(d?.error?.message||d?.message||"Error al crear el control de factura").toString();u().fire({title:"Error",text:f,icon:"error"})}})},error:()=>{this.contSrv.guardarContFactura(a).subscribe({next:()=>{u().fire({title:"Excelente!",text:"Control de factura creado.",icon:"success",timer:3e3,showConfirmButton:!1}),this.cargarContadoresSucursales()},error:r=>{const s=(r?.error?.message||r?.message||"Error al crear el control de factura").toString();u().fire({title:"Error",text:s,icon:"error"})}})}}):u().fire({title:"Datos incompletos",text:"Falta la sucursal.",icon:"warning"})}mostrarDetalleSucursal(t){this.sucursalDetalle=t;const a=Number(t?.cod_sucursal),r=this.contfacturaPorSucursal[a]||null;this.detalleCont=r?{ano:r.ano,contador:r.contador}:null,$("#detalleSucursalModal").modal("show")}consultarSucursal(t){this.formularioEmpresa.patchValue(t),this.activaformularioSucursal=!0,this.habilitarFormulario=!0,this.modoconsultaEmpresa=!0,this.activatablaSucursal=!0,this.sucursalList=t.sucursales}eliminarEmpresa(t){u().fire({title:"\xbfEst\xe1 seguro de eliminar este Empresa?",text:"\xa1No podr\xe1 revertir esto!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si, eliminar!"}).then(a=>{a.isConfirmed&&this.servicioEmpresa.eliminarEmpresa(t).subscribe(r=>{u().fire({title:"Excelente!",text:"Empresa eliminado correctamente.",icon:"success",timer:2e3,showConfirmButton:!1}),this.buscarTodasEmpresa(this.currentPage)})})}eliminarSucursal(t){const a=String(t);u().fire({title:"\xbfEst\xe1 seguro de eliminar esta Sucursal?",text:"\xa1No podr\xe1 revertir esto!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si, eliminar!"}).then(r=>{r.isConfirmed&&this.servicioSucursal.eliminarSucursal(a).subscribe(s=>{u().fire({title:"Excelente!",text:"Sucursal eliminado correctamente.",icon:"success",timer:2e3,showConfirmButton:!1}),this.refrescarSucursalesModal()})})}abrirModalNuevaSucursal(){const t=this.empresaid||this.formularioEmpresa.getRawValue()?.cod_empre;this.modoedicionSucursal=!1,this.sucursalEditId=null,this.formularioSucursal.reset({cod_empre:t||"",nom_sucursal:"",tel_sucursal:"",dir_sucursal:""}),$("#modalSucursal").modal("show")}abrirModalEditarSucursal(t){this.modoedicionSucursal=!0,this.sucursalEditId=Number(t?.cod_sucursal)||null,this.formularioSucursal.reset({cod_empre:t.cod_empre,nom_sucursal:t.nom_sucursal,tel_sucursal:t.tel_sucursal,dir_sucursal:t.dir_sucursal}),$("#modalSucursal").modal("show")}refrescarSucursalesModal(){const t=this.empresaid||this.formularioEmpresa.getRawValue()?.cod_empre;t&&this.servicioEmpresa.buscarEmpres(t).subscribe({next:a=>{const r=a?.data,s=Array.isArray(r)?r[0]:r;s&&(this.sucursalList=s.sucursales||s.sucursal||[],this.cargarContadoresSucursales(),this.cargarEncfEmpresa(t))}})}cargarContadoresSucursales(){const t=this.sucursalList||[];t.length?this.contSrv.buscarTodos(1,500,void 0).subscribe({next:a=>{const r=Array.isArray(a?.data)?a.data:[],s=(new Date).getFullYear(),o={};for(const n of t){const l=Number(n?.cod_sucursal),d=r.filter(f=>Number(f?.idsucursal||f?.sucursal?.cod_sucursal)===l);if(d.length){const F=d.find(E=>Number(E?.ano)===s)||d.reduce((E,k)=>{const H=Number(E?.ano||0);return Number(k?.ano||0)>H?k:E},d[0]);o[l]={ano:Number(F?.ano||s),contador:Number(F?.contador||0)}}else o[l]=null}this.contfacturaPorSucursal=o},error:()=>{this.contfacturaPorSucursal={}}}):this.contfacturaPorSucursal={}}cargarEncfEmpresa(t){const a=String(t||this.empresaid||this.formularioEmpresa.getRawValue()?.cod_empre||"").trim();a?this.servicioEncf.obtenerEncfPorEmpresaId(a).subscribe({next:r=>{const s=Array.isArray(r?.data)?r.data:Array.isArray(r)?r:[];this.encfList=s||[]},error:()=>{this.encfList=[]}}):this.encfList=[]}tipoDescripcion(t){const a=String(t||"").toUpperCase();return{B01:"Cr\xe9dito Fiscal",B02:"Consumidor Final",B14:"Gubernamental",E01:"Comprobante Especial",E02:"Reg\xedmenes Especiales"}[a]||a||"-"}abrirDetalleEncf(t){this.encfSeleccionado=t||null,$("#detalleEncfModal").modal("show")}abrirEditarEncf(t){this.encfEditId=Number(t?.id)||null;const a=this.empresaid||this.formularioEmpresa.getRawValue()?.cod_empre;this.formEncf.reset({id:this.encfEditId,codempr:a||t?.codempr||"",tipoencf:t?.tipoencf||"",desdeencf:Number(t?.desdeencf||0),hastaencf:Number(t?.hastaencf||0),cantencf:Number(t?.cantencf||0),countencf:Number(t?.countencf||0),fechaencf:t?.fechaencf?new Date(t.fechaencf).toISOString().substring(0,10):"",alertaencf:Number(t?.alertaencf||0)}),this.formEncf.get("codempr")?.disable(),$("#editarEncfModal").modal("show")}agregarEncfEmpresa(){const t=this.empresaid||this.formularioEmpresa.getRawValue()?.cod_empre;this.encfEditId=null,this.formEncf.reset({id:null,codempr:t||"",tipoencf:"",desdeencf:0,hastaencf:0,cantencf:0,countencf:0,fechaencf:(new Date).toISOString().substring(0,10),alertaencf:0}),this.formEncf.get("codempr")?.disable(),$("#editarEncfModal").modal("show")}guardarEncfEmpresa(){const t=this.formEncf.getRawValue(),a={codempr:String(this.empresaid||t.codempr||"").trim(),cantencf:Number(t.cantencf||0),countencf:Number(t.countencf||0),alertaencf:Number(t.alertaencf||0),fechaencf:t.fechaencf,hastaencf:Number(t.hastaencf||0),tipoencf:String(t.tipoencf||"").trim(),desdeencf:Number(t.desdeencf||0)};if(!a.codempr||!a.tipoencf||!a.fechaencf)return void u().fire({title:"Datos incompletos",text:"Complete empresa, tipo y fecha.",icon:"warning"});const r=Number(t.id||this.encfEditId);(!isNaN(r)&&r>0?this.servicioEncf.editarEncf(r,a):this.servicioEncf.crearEncf(a)).subscribe({next:()=>{u().fire({title:"Excelente!",text:!isNaN(r)&&r>0?"ENC-F actualizado.":"ENC-F creado.",icon:"success",timer:2e3,showConfirmButton:!1}),this.cargarEncfEmpresa(a.codempr),$("#editarEncfModal").modal("hide")},error:o=>{const n=(o?.error?.message||o?.message||"Error guardando ENC-F").toString();u().fire({title:"Error",text:n,icon:"error"})}})}descripcionEntra(t){this.descripcionBuscar.next(t.target.value.toUpperCase())}codigoEntra(t){this.codigoBuscar.next(t.target.value.toUpperCase())}guardarSucursal(){const a=this.formularioEmpresa.getRawValue()?.cod_empre||this.empresaid;if(this.formularioSucursal.patchValue({cod_empre:a}),this.formularioSucursal.valid&&a){const r=this.formularioSucursal.value,s=this.sucursalEditId;(s&&!isNaN(s)?this.servicioSucursal.editaSucursal(String(s),r):this.servicioSucursal.guardarSucursal(r)).subscribe({next:()=>{u().fire({title:"Excelente!",text:s?"Sucursal actualizada correctamente.":"Sucursal guardada correctamente.",icon:"success",timer:3e3,showConfirmButton:!1}),this.refrescarSucursalesModal(),this.formularioSucursal.reset(),this.crearformularioSucursal(),this.formularioEmpresa.enable(),this.activaformularioSucursal=!1,$("#modalSucursal").modal("hide")},error:n=>{const l=(n?.error?.message||n?.message||"Error al guardar la sucursal").toString();u().fire({title:"Error",text:l,icon:"error"})}})}else u().fire({title:"Datos incompletos",text:"Falta el C\xf3digo de Empresa.",icon:"warning"})}guardarEmpresa(){const t=this.formularioEmpresa.getRawValue(),a=this.buildEmpresaPayload(t);console.log("Payload Empresa:",a),this.formularioEmpresa.valid&&a.cod_empre&&a.nom_empre?this.modoedicionEmpresa?this.servicioEmpresa.editarEmpresa(this.empresaid,a).subscribe({next:()=>{u().fire({title:"Excelente!",text:"Empresa Editada correctamente.",icon:"success",timer:5e3,showConfirmButton:!1}),this.buscarTodasEmpresa(1),this.formularioEmpresa.reset(),this.crearFormularioEmpresa(),$("#modalempresa").modal("hide")},error:r=>{const s=r?.error?.details?`\n${JSON.stringify(r.error.details)}`:"",o=(r?.error?.message||r?.message||"Error al editar la empresa").toString()+s;u().fire({title:"Error",text:o,icon:"error"})}}):this.servicioEmpresa.guardarEmpresa(a).subscribe({next:()=>{this.servicioSucursal.guardarSucursal({cod_empre:a.cod_empre,nom_sucursal:a.nom_empre,dir_sucursal:a.dir_empre||"NO APLICA",tel_sucursal:a.tel_empre||"0000000000"}).subscribe({next:()=>{u().fire({title:"Excelente!",text:"Empresa y Sucursal guardadas correctamente.",icon:"success",timer:5e3,showConfirmButton:!1}),this.buscarTodasEmpresa(1),this.formularioEmpresa.reset(),this.crearFormularioEmpresa(),$("#modalempresa").modal("hide")},error:s=>{const o=s?.error?.details?`\n${JSON.stringify(s.error.details)}`:"",n=(s?.error?.message||s?.message||"Empresa guardada, pero error creando la Sucursal").toString()+o;u().fire({title:"Aviso",text:n,icon:"warning"}),this.buscarTodasEmpresa(1),this.formularioEmpresa.reset(),this.crearFormularioEmpresa(),$("#modalempresa").modal("hide")}})},error:r=>{const s=r?.error?.details?`\n${JSON.stringify(r.error.details)}`:"",o=(r?.error?.message||r?.message||"Error al guardar la empresa").toString()+s;u().fire({title:"Error",text:o,icon:"error"})}}):(this.formularioEmpresa.markAllAsTouched(),u().fire({title:"Formulario incompleto",text:"Complete los campos requeridos.",icon:"warning"}))}convertToUpperCase(t){const a=t.target,r=a.selectionStart,s=a.selectionEnd;a.value=a.value.toUpperCase(),null!==r&&null!==s&&a.setSelectionRange(r,s)}moveFocus(t,a){"Enter"===t.key&&a&&(t.preventDefault(),a.focus())}changePage(t){this.currentPage=t;const a=this.descripcionBuscar.getValue();this.servicioEmpresa.buscarEmpresa(this.currentPage,this.pageSize,a).subscribe(r=>{this.empresaList=r.data,this.totalItems=r.pagination.total,this.currentPage=t})}get totalPages(){return Math.ceil(this.totalItems/this.pageSize)}get pages(){const t=this.totalPages,a=this.currentPage,r=this.maxPagesToShow;if(t<=r)return Array.from({length:t},(n,l)=>l+1);const s=Math.max(1,a-Math.floor(r/2)),o=Math.min(t,s+r-1);return Array.from({length:o-s+1},(n,l)=>s+l)}limpiaBusqueda(){this.txtdescripcion="",this.txtcodigo="",this.buscarTodasEmpresa(1)}static{this.\u0275fac=function(a){return new(a||i)(e.rXU(c.ok),e.rXU(N.g),e.rXU(y.F),e.rXU(R.Z),e.rXU(x.t))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["Empresas"]],decls:250,vars:31,consts:[[1,"card",2,"height","87vh"],[1,"card-header"],[1,"card-body"],[1,"row"],[1,"col-2"],["for",""],["type","text","placeholder","Digite RNC",1,"form-control",3,"ngModel","ngModelChange","input"],[1,"col-3"],["type","text","placeholder","Digite Nombre...",1,"form-control","uppercase",3,"ngModel","ngModelChange","input"],[1,"btn","btn-danger","mt-4",3,"click"],[1,"bi","bi-arrow-counterclockwise"],[1,"btn","btn-primary","mt-4","justify-content-end",3,"click"],[1,"table-responsive","shadow-sm","rounded","border",2,"max-height","400px","overflow-y","auto"],[1,"table","table-hover","table-striped","align-middle","mb-0"],[1,"table-dark","sticky-top"],[1,"text-center"],[1,"py-3",2,"width","10%"],[1,"py-3",2,"width","15%"],[1,"py-3",2,"width","25%"],[4,"ngFor","ngForOf"],[4,"ngIf"],["aria-label","Page navigation"],[1,"pagination","justify-content-center"],[1,"page-item"],["aria-label","First",1,"page-link",3,"click"],["aria-hidden","true"],["aria-label","Previous",1,"page-link",3,"click"],["class","page-item",3,"active",4,"ngFor","ngForOf"],["aria-label","Next",1,"page-link",3,"click"],["aria-label","Last",1,"page-link",3,"click"],["id","modalempresa","tabindex","-1","aria-labelledby","modalEmpresaLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-dialog-centered","modal-xl","emp-modal"],[1,"modal-content"],[1,"modal-header"],["id","modalEmpresaLabel",1,"modal-title","fs-5"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"row","g-3"],[1,"custom-form-background",3,"formGroup","ngSubmit"],[1,"card"],[1,"col-10"],[1,"mb-0"],[1,"col-2","justify-content-end"],["type","submit","class","btn btn-success",4,"ngIf"],["type","text","formControlName","cod_empre",1,"form-control","form-control-sm",3,"input","keydown"],["input1",""],["type","number","formControlName","rnc_empre",1,"form-control","form-control-sm",3,"keydown"],["input2",""],[1,"col-6"],["type","text","formControlName","nom_empre",1,"form-control","form-control-sm",3,"input","keydown"],["input3",""],["type","text","formControlName","letra_empre",1,"form-control","form-control-sm",3,"input","keydown"],["input4",""],["type","text","formControlName","tel_empre",1,"form-control","form-control-sm",3,"keydown"],["input5",""],["type","text","formControlName","dir_empre",1,"form-control","form-control-sm",3,"input"],["input6",""],[1,"col-lg-12"],["class","row mt-3",4,"ngIf"],["id","contFacModalEmpresa","tabindex","-1","aria-labelledby","contFacModalEmpresaLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],["id","contFacModalEmpresaLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[3,"ngSubmit"],["contEmpresaForm","ngForm"],[1,"mb-3"],[1,"form-label"],["type","text","readonly","",1,"form-control",3,"value"],["type","number","name","ano","required","",1,"form-control",3,"ngModel","ngModelChange"],["type","number","name","contador","required","",1,"form-control",3,"ngModel","ngModelChange"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-outline-secondary"],["type","submit","data-bs-dismiss","modal",1,"btn","btn-primary",3,"disabled"],["id","detalleSucursalModal","tabindex","-1","aria-labelledby","detalleSucursalModalLabel","aria-hidden","true",1,"modal","fade"],["id","detalleSucursalModalLabel",1,"modal-title"],["class","modal-body",4,"ngIf"],["id","modalSucursal","tabindex","-1","aria-labelledby","modalSucursalLabel","aria-hidden","true",1,"modal","fade"],["id","modalSucursalLabel",1,"modal-title"],[3,"formGroup","ngSubmit"],[1,"mb-2"],["type","text","formControlName","nom_sucursal",1,"form-control"],["type","text","formControlName","tel_sucursal",1,"form-control"],["type","text","formControlName","dir_sucursal",1,"form-control"],["type","submit","data-bs-dismiss","modal",1,"btn","btn-primary"],["id","detalleEncfModal","tabindex","-1","aria-labelledby","detalleEncfModalLabel","aria-hidden","true",1,"modal","fade"],["id","detalleEncfModalLabel",1,"modal-title"],["id","editarEncfModal","tabindex","-1","aria-labelledby","editarEncfModalLabel","aria-hidden","true",1,"modal","fade"],["id","editarEncfModalLabel",1,"modal-title"],["type","text","formControlName","codempr","readonly","",1,"form-control"],["formControlName","tipoencf","required","",1,"form-select"],["value",""],["value","B01"],["value","B02"],["value","B14"],["value","E01"],["value","E02"],[1,"row","g-2"],["type","number","formControlName","desdeencf",1,"form-control"],["type","number","formControlName","hastaencf",1,"form-control"],[1,"row","g-2","mt-1"],["type","number","formControlName","cantencf",1,"form-control"],["type","number","formControlName","countencf",1,"form-control"],["type","date","formControlName","fechaencf",1,"form-control"],["type","number","formControlName","alertaencf",1,"form-control"],[1,"text-center","fw-bold","text-secondary"],[1,"fw-semibold","text-primary"],[1,"small","text-muted"],["role","group",1,"btn-group"],["title","Ver Detalles",1,"btn","btn-outline-success","btn-sm",3,"click"],[1,"bi","bi-eye"],["title","Editar",1,"btn","btn-outline-primary","btn-sm",3,"click"],[1,"bi","bi-pencil"],["title","Eliminar",1,"btn","btn-outline-danger","btn-sm",3,"click"],[1,"bi","bi-trash"],["colspan","6",1,"text-center","py-5","text-muted"],[1,"bi","bi-inbox","fs-1","d-block","mb-2"],[1,"page-link",3,"click"],["type","submit",1,"btn","btn-success"],[1,"row","mt-3"],[1,"card-header","d-flex","justify-content-between","align-items-center"],["type","button","class","btn btn-primary btn-sm",3,"click",4,"ngIf"],[1,"table-responsive",2,"max-height","380px","overflow-y","auto"],[1,"table","table-bordered","table-hover","table-striped","table-sm"],[1,"table-dark"],[2,"width","4%"],[2,"width","20%"],[2,"width","10%"],[2,"width","31%"],[2,"width","15%"],[3,"cursor","click",4,"ngFor","ngForOf"],[1,"card-body","p-0"],[1,"table-responsive",2,"max-height","300px","overflow-y","auto"],[2,"width","18%"],[2,"width","12%"],["type","button",1,"btn","btn-primary","btn-sm",3,"click"],[1,"bi","bi-plus-circle"],[3,"click"],[1,"text"],[1,"text-end"],[4,"ngIf","ngIfElse"],["accionesConsulta",""],["title","Editar sucursal",1,"btn","btn-link",3,"click"],[1,"bi","bi-pencil","text-secondary"],["title","Editar control de factura",1,"btn","btn-link",3,"click"],[1,"bi","bi-pencil-square","text-primary"],[1,"btn","btn-link",3,"click"],[1,"bi","bi-trash","text-danger"],["class","btn btn-link",3,"click",4,"ngIf"],[1,"bi","bi-pencil-square"],["colspan","7",1,"text-center","text-muted","py-3"]],template:function(a,r){if(1&a){const s=e.RV6();e.j41(0,"div",0)(1,"div",1)(2,"h1"),e.EFF(3,"Empresas"),e.k0s()(),e.j41(4,"div",2)(5,"div",3)(6,"div",4)(7,"label",5),e.EFF(8,"Buscar Rnc Empresa"),e.k0s(),e.j41(9,"input",6),e.bIt("ngModelChange",function(n){return r.txtcodigo=n})("input",function(n){return r.codigoEntra(n)}),e.k0s()(),e.j41(10,"div",7)(11,"label",5),e.EFF(12,"Buscar Nombre"),e.k0s(),e.j41(13,"input",8),e.bIt("ngModelChange",function(n){return r.txtdescripcion=n})("input",function(n){return r.descripcionEntra(n)}),e.k0s()(),e.j41(14,"div",4)(15,"button",9),e.bIt("click",function(){return r.limpiaBusqueda()}),e.nrm(16,"i",10),e.k0s()(),e.nrm(17,"div",7),e.j41(18,"div",4)(19,"button",11),e.bIt("click",function(){return r.nuevaEmpresa()}),e.EFF(20," Nueva Empresa "),e.k0s()()(),e.nrm(21,"br"),e.j41(22,"div",12)(23,"table",13)(24,"thead",14)(25,"tr",15)(26,"th",16),e.EFF(27,"C\xf3digo"),e.k0s(),e.j41(28,"th",17),e.EFF(29,"RNC"),e.k0s(),e.j41(30,"th",18),e.EFF(31,"Empresa"),e.k0s(),e.j41(32,"th",17),e.EFF(33,"Tel\xe9fono"),e.k0s(),e.j41(34,"th",18),e.EFF(35,"Direcci\xf3n"),e.k0s(),e.j41(36,"th",16),e.EFF(37,"Acciones"),e.k0s()()(),e.j41(38,"tbody"),e.DNE(39,I,19,5,"tr",19),e.DNE(40,M,4,0,"tr",20),e.k0s()()(),e.j41(41,"nav",21)(42,"ul",22)(43,"li",23)(44,"a",24),e.bIt("click",function(){return r.changePage(1)}),e.j41(45,"span",25),e.EFF(46,"\xab\xab"),e.k0s()()(),e.j41(47,"li",23)(48,"a",26),e.bIt("click",function(){return r.changePage(r.currentPage-1)}),e.j41(49,"span",25),e.EFF(50,"\xab"),e.k0s()()(),e.DNE(51,T,3,3,"li",27),e.j41(52,"li",23)(53,"a",28),e.bIt("click",function(){return r.changePage(r.currentPage+1)}),e.j41(54,"span",25),e.EFF(55,"\xbb"),e.k0s()()(),e.j41(56,"li",23)(57,"a",29),e.bIt("click",function(){return r.changePage(r.totalPages)}),e.j41(58,"span",25),e.EFF(59,"\xbb\xbb"),e.k0s()()()()()()(),e.j41(60,"div",30)(61,"div",31)(62,"div",32)(63,"div",33)(64,"h1",34),e.EFF(65),e.k0s(),e.j41(66,"button",35),e.bIt("click",function(){return r.cerrarModalEmpresa()}),e.k0s()(),e.j41(67,"div",36)(68,"div",37)(69,"form",38),e.bIt("ngSubmit",function(){return r.guardarEmpresa()}),e.j41(70,"div",39)(71,"div",1)(72,"div",3)(73,"div",40)(74,"h6",41),e.EFF(75,"Datos de la Empresa"),e.k0s()(),e.j41(76,"div",42),e.DNE(77,w,2,1,"button",43),e.k0s()()(),e.j41(78,"div",2)(79,"div",3)(80,"div",4)(81,"label"),e.EFF(82,"Cod. Empresa"),e.k0s(),e.j41(83,"input",44,45),e.bIt("input",function(n){return r.convertToUpperCase(n)})("keydown",function(n){e.eBV(s);const l=e.sdS(89);return e.Njj(r.moveFocus(n,l))}),e.k0s()(),e.j41(85,"div",4)(86,"label"),e.EFF(87,"Rnc. Empresa"),e.k0s(),e.j41(88,"input",46,47),e.bIt("keydown",function(n){e.eBV(s);const l=e.sdS(94);return e.Njj(r.moveFocus(n,l))}),e.k0s()(),e.j41(90,"div",48)(91,"label"),e.EFF(92,"Nombre"),e.k0s(),e.j41(93,"input",49,50),e.bIt("input",function(n){return r.convertToUpperCase(n)})("keydown",function(n){e.eBV(s);const l=e.sdS(99);return e.Njj(r.moveFocus(n,l))}),e.k0s()(),e.j41(95,"div",4)(96,"label",5),e.EFF(97,"Iniciales"),e.k0s(),e.j41(98,"input",51,52),e.bIt("input",function(n){return r.convertToUpperCase(n)})("keydown",function(n){e.eBV(s);const l=e.sdS(105);return e.Njj(r.moveFocus(n,l))}),e.k0s()()(),e.j41(100,"div",3)(101,"div",48)(102,"label"),e.EFF(103,"Telefono"),e.k0s(),e.j41(104,"input",53,54),e.bIt("keydown",function(n){e.eBV(s);const l=e.sdS(110);return e.Njj(r.moveFocus(n,l))}),e.k0s()(),e.j41(106,"div",48)(107,"label"),e.EFF(108,"Direccion"),e.k0s(),e.j41(109,"input",55,56),e.bIt("input",function(n){return r.convertToUpperCase(n)}),e.k0s()()()()()()(),e.j41(111,"div",37)(112,"div",57),e.DNE(113,Y,54,5,"div",58),e.k0s()()()()()(),e.j41(114,"div",59)(115,"div",60)(116,"div",32)(117,"div",33)(118,"h5",61),e.EFF(119),e.k0s(),e.nrm(120,"button",62),e.k0s(),e.j41(121,"form",63,64),e.bIt("ngSubmit",function(){e.eBV(s);const n=e.sdS(122);return e.Njj(r.guardarContFacturaEmpresa(n))}),e.j41(123,"div",36)(124,"div",65)(125,"label",66),e.EFF(126,"Sucursal"),e.k0s(),e.nrm(127,"input",67),e.k0s(),e.j41(128,"div",65)(129,"label",66),e.EFF(130,"A\xf1o"),e.k0s(),e.j41(131,"input",68),e.bIt("ngModelChange",function(n){return r.contfacturaActual.ano=n}),e.k0s()(),e.j41(132,"div",65)(133,"label",66),e.EFF(134,"Contador"),e.k0s(),e.j41(135,"input",69),e.bIt("ngModelChange",function(n){return r.contfacturaActual.contador=n}),e.k0s()()(),e.j41(136,"div",70)(137,"button",71),e.EFF(138,"Cancelar"),e.k0s(),e.j41(139,"button",72),e.EFF(140),e.k0s()()()()()(),e.j41(141,"div",73)(142,"div",60)(143,"div",32)(144,"div",33)(145,"h5",74),e.EFF(146,"Detalle de Sucursal"),e.k0s(),e.nrm(147,"button",62),e.k0s(),e.DNE(148,X,25,6,"div",75),e.j41(149,"div",70)(150,"button",71),e.EFF(151,"Cerrar"),e.k0s()()()()(),e.j41(152,"div",76)(153,"div",60)(154,"div",32)(155,"div",33)(156,"h5",77),e.EFF(157),e.k0s(),e.nrm(158,"button",62),e.k0s(),e.j41(159,"form",78),e.bIt("ngSubmit",function(){return r.guardarSucursal()}),e.j41(160,"div",36)(161,"div",79)(162,"label",66),e.EFF(163,"Nombre Sucursal"),e.k0s(),e.nrm(164,"input",80),e.k0s(),e.j41(165,"div",79)(166,"label",66),e.EFF(167,"Tel\xe9fono"),e.k0s(),e.nrm(168,"input",81),e.k0s(),e.j41(169,"div",79)(170,"label",66),e.EFF(171,"Direcci\xf3n"),e.k0s(),e.nrm(172,"input",82),e.k0s()(),e.j41(173,"div",70)(174,"button",71),e.EFF(175,"Cancelar"),e.k0s(),e.j41(176,"button",83),e.EFF(177),e.k0s()()()()()(),e.j41(178,"div",84)(179,"div",60)(180,"div",32)(181,"div",33)(182,"h5",85),e.EFF(183,"Detalle ENC-F"),e.k0s(),e.nrm(184,"button",62),e.k0s(),e.DNE(185,J,26,10,"div",75),e.j41(186,"div",70)(187,"button",71),e.EFF(188,"Cerrar"),e.k0s()()()()(),e.j41(189,"div",86)(190,"div",60)(191,"div",32)(192,"div",33)(193,"h5",87),e.EFF(194),e.k0s(),e.nrm(195,"button",62),e.k0s(),e.j41(196,"form",78),e.bIt("ngSubmit",function(){return r.guardarEncfEmpresa()}),e.j41(197,"div",36)(198,"div",79)(199,"label",66),e.EFF(200,"Empresa"),e.k0s(),e.nrm(201,"input",88),e.k0s(),e.j41(202,"div",79)(203,"label",66),e.EFF(204,"Tipo ENCF"),e.k0s(),e.j41(205,"select",89)(206,"option",90),e.EFF(207,"Seleccione tipo"),e.k0s(),e.j41(208,"option",91),e.EFF(209,"B01 - Cr\xe9dito Fiscal"),e.k0s(),e.j41(210,"option",92),e.EFF(211,"B02 - Consumidor Final"),e.k0s(),e.j41(212,"option",93),e.EFF(213,"B14 - Gubernamental"),e.k0s(),e.j41(214,"option",94),e.EFF(215,"E01 - Comprobante Especial"),e.k0s(),e.j41(216,"option",95),e.EFF(217,"E02 - Reg\xedmenes Especiales"),e.k0s()()(),e.j41(218,"div",96)(219,"div",48)(220,"label",66),e.EFF(221,"Desde"),e.k0s(),e.nrm(222,"input",97),e.k0s(),e.j41(223,"div",48)(224,"label",66),e.EFF(225,"Hasta"),e.k0s(),e.nrm(226,"input",98),e.k0s()(),e.j41(227,"div",99)(228,"div",48)(229,"label",66),e.EFF(230,"Cantidad"),e.k0s(),e.nrm(231,"input",100),e.k0s(),e.j41(232,"div",48)(233,"label",66),e.EFF(234,"Contador"),e.k0s(),e.nrm(235,"input",101),e.k0s()(),e.j41(236,"div",99)(237,"div",48)(238,"label",66),e.EFF(239,"Fecha"),e.k0s(),e.nrm(240,"input",102),e.k0s(),e.j41(241,"div",48)(242,"label",66),e.EFF(243,"Alerta (%)"),e.k0s(),e.nrm(244,"input",103),e.k0s()()(),e.j41(245,"div",70)(246,"button",71),e.EFF(247,"Cancelar"),e.k0s(),e.j41(248,"button",83),e.EFF(249),e.k0s()()()()()()}if(2&a){const s=e.sdS(122);e.R7$(9),e.Y8G("ngModel",r.txtcodigo),e.R7$(4),e.Y8G("ngModel",r.txtdescripcion),e.R7$(26),e.Y8G("ngForOf",r.empresaList),e.R7$(1),e.Y8G("ngIf",0===r.empresaList.length),e.R7$(3),e.AVh("disabled",1===r.currentPage),e.R7$(4),e.AVh("disabled",1===r.currentPage),e.R7$(4),e.Y8G("ngForOf",r.pages),e.R7$(1),e.AVh("disabled",r.currentPage===r.totalPages),e.R7$(4),e.AVh("disabled",r.currentPage===r.totalPages),e.R7$(9),e.SpI(" ",r.tituloModalEmpresa," "),e.R7$(4),e.Y8G("formGroup",r.formularioEmpresa),e.R7$(8),e.Y8G("ngIf",!r.modoconsultaEmpresa),e.R7$(36),e.Y8G("ngIf",r.activatablaSucursal),e.R7$(6),e.JRh(r.contfacturaEditId?"Editar Control de Factura":"Nuevo Control de Factura"),e.R7$(8),e.Y8G("value",r.contSucursalNombre),e.R7$(4),e.Y8G("ngModel",r.contfacturaActual.ano),e.R7$(4),e.Y8G("ngModel",r.contfacturaActual.contador),e.R7$(4),e.Y8G("disabled",!s.valid),e.R7$(1),e.JRh(r.contfacturaEditId?"Guardar cambios":"Agregar"),e.R7$(8),e.Y8G("ngIf",r.sucursalDetalle),e.R7$(9),e.JRh(r.modoedicionSucursal?"Editar Sucursal":"Nueva Sucursal"),e.R7$(2),e.Y8G("formGroup",r.formularioSucursal),e.R7$(18),e.JRh(r.modoedicionSucursal?"Guardar cambios":"Guardar"),e.R7$(8),e.Y8G("ngIf",r.encfSeleccionado),e.R7$(9),e.JRh(r.encfEditId?"Editar ENCF":"Nuevo ENCF"),e.R7$(2),e.Y8G("formGroup",r.formEncf),e.R7$(53),e.JRh(r.encfEditId?"Guardar cambios":"Guardar")}},dependencies:[h.Sq,h.bT,c.qT,c.xH,c.y7,c.me,c.Q0,c.wz,c.BC,c.cb,c.YS,c.j4,c.JD,c.vS,c.cV,h.vh],styles:[".no-border[_ngcontent-%COMP%]{border:none!important}.table-[_ngcontent-%COMP%]   class[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table-class[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:1px}.tabla-estrecha[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-weight:700}.emp-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]{border-radius:8px}.emp-modal[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{background:#f5f7fa;border-bottom:1px solid #e5e9f2}.emp-modal[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{box-shadow:0 1px 3px #00000014}.emp-modal[_ngcontent-%COMP%]   .table-responsive[_ngcontent-%COMP%]{border:1px solid #e5e9f2;border-radius:6px}.emp-modal[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{position:sticky;top:0;z-index:1}.uppercase-input[_ngcontent-%COMP%]{text-transform:uppercase}"]})}}return i})()}];let q=(()=>{class i{static{this.\u0275fac=function(a){return new(a||i)}}static{this.\u0275mod=e.$C({type:i})}static{this.\u0275inj=e.G2t({imports:[_.iI.forChild(U),_.iI]})}}return i})(),z=(()=>{class i{static{this.\u0275fac=function(a){return new(a||i)}}static{this.\u0275mod=e.$C({type:i})}static{this.\u0275inj=e.G2t({imports:[h.MD,q,c.X1,c.YN]})}}return i})()}}]);