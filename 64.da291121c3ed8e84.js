"use strict";(self.webpackChunkSaltorSystem=self.webpackChunkSaltorSystem||[]).push([[64],{8064:(C,m,i)=>{i.r(m),i.d(m,{ModuloModulo:()=>j});var u=i(177),g=i(8871),n=i(9417);class b{constructor(c){this.idmodulo=c?.idmodulo??0,this.descmodulo=c?.descmodulo??"",this.scceso=c?.scceso??"N",this.lectura=c?.lectura??"N",this.permisos=c?.permisos??[]}}var o=i(8699),h=i(5961);function F(l,c){if(1&l){const e=o.RV6();o.j41(0,"tr")(1,"td"),o.EFF(2),o.k0s(),o.j41(3,"td"),o.EFF(4),o.k0s(),o.j41(5,"td")(6,"span",43),o.EFF(7),o.k0s()(),o.j41(8,"td")(9,"span",43),o.EFF(10),o.k0s()(),o.j41(11,"td"),o.EFF(12),o.k0s(),o.j41(13,"td")(14,"button",44),o.bIt("click",function(){const d=o.eBV(e).$implicit,a=o.XpG();return o.Njj(a.editarModulo(d))}),o.nrm(15,"i",45),o.k0s(),o.j41(16,"button",46),o.bIt("click",function(){const d=o.eBV(e).$implicit,a=o.XpG();return o.Njj(a.eliminarModulo(d))}),o.nrm(17,"i",47),o.k0s()()()}if(2&l){const e=c.$implicit;o.R7$(2),o.JRh(e.idmodulo),o.R7$(2),o.JRh(e.descmodulo),o.R7$(2),o.Y8G("ngClass","S"===(e.scceso||"N")?"bg-success":"bg-secondary"),o.R7$(1),o.SpI(" ","S"===(e.scceso||"N")?"S\xed":"No"," "),o.R7$(2),o.Y8G("ngClass","S"===(e.lectura||"N")?"bg-info":"bg-secondary"),o.R7$(1),o.SpI(" ","S"===(e.lectura||"N")?"S\xed":"No"," "),o.R7$(2),o.JRh((null==e.permisos?null:e.permisos.length)||0)}}function p(l,c){1&l&&(o.j41(0,"tr")(1,"td",48),o.EFF(2,"No hay m\xf3dulos configurados"),o.k0s()())}let M=(()=>{class l{constructor(e){this.moduloSrv=e,this.modulos=[],this.filtro="",this.nuevo={descmodulo:"",scceso:"N",lectura:"N",permisos:[]}}ngOnInit(){this.cargarModulos()}cargarModulos(){this.moduloSrv.obtenerTodosModulo().subscribe({next:e=>{const s=Array.isArray(e?.data)?e.data:Array.isArray(e)?e:[];this.modulos=(s||[]).map(t=>new b({idmodulo:t.idmodulo,descmodulo:t.descmodulo,scceso:t.scceso,lectura:t.lectura,permisos:t.permisos||[]}))},error:e=>{console.error("Error cargando m\xf3dulos",e),alert(e.error.message),this.modulos=[]}})}get listaFiltrada(){const e=this.filtro.trim().toLowerCase();return e?this.modulos.filter(s=>(s.idmodulo+"").includes(e)||(s.descmodulo||"").toLowerCase().includes(e)||(s.scceso||"").toLowerCase().includes(e)||(s.lectura||"").toLowerCase().includes(e)):this.modulos}crearModulo(e){if(!e.valid)return;const s=(this.nuevo.descmodulo||"").trim();if(!s||s.length>30)return;const t=(this.nuevo.scceso||"N").toUpperCase(),d=(this.nuevo.lectura||"N").toUpperCase();["S","N"].includes(t)&&["S","N"].includes(d)&&this.moduloSrv.guardarModulo({descmodulo:s,scceso:t,lectura:d,permisos:[]}).subscribe({next:()=>{this.cargarModulos(),this.nuevo={descmodulo:"",scceso:"N",lectura:"N",permisos:[]},e.resetForm({descmodulo:"",scceso:"N",lectura:"N"})},error:r=>{console.error("Error guardando m\xf3dulo",r)}})}getBadgeClass(e,s){return"acceso"===s?"S"===e?"bg-success":"bg-secondary":"lectura"===s&&"S"===e?"bg-info":"bg-secondary"}editarModulo(e){console.log("Editar m\xf3dulo",e)}eliminarModulo(e){confirm(`\xbfDesea eliminar el m\xf3dulo ${e.descmodulo}?`)&&console.log("Eliminar m\xf3dulo",e)}static{this.\u0275fac=function(s){return new(s||l)(o.rXU(h.V))}}static{this.\u0275cmp=o.VBU({type:l,selectors:[["app-config-modulo"]],decls:75,vars:7,consts:[[1,"container-fluid"],[1,"card","shadow-sm"],[1,"card-header","bg-primary","text-white","d-flex","align-items-center"],[1,"bi","bi-ui-checks-grid","me-2"],[1,"mb-0"],[1,"card-body"],[1,"row","g-3","mb-3"],[1,"col-12","col-md-6"],[1,"input-group"],[1,"input-group-text"],[1,"bi","bi-search"],["type","text","placeholder","Buscar m\xf3dulo...",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-12","col-md-6","text-md-end"],["data-bs-toggle","modal","data-bs-target","#nuevoModuloModal",1,"btn","btn-primary"],[1,"bi","bi-plus-circle","me-1"],[1,"table-responsive"],[1,"table","table-hover","table-striped"],[1,"table-light"],["scope","col"],[4,"ngFor","ngForOf"],[4,"ngIf"],["id","nuevoModuloModal","tabindex","-1","aria-labelledby","nuevoModuloLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","nuevoModuloLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[3,"ngSubmit"],["nuevoForm","ngForm"],[1,"modal-body"],[1,"mb-3"],[1,"form-label"],["type","text","name","descmodulo","required","","maxlength","30","placeholder","Ej. Inventario",1,"form-control",3,"ngModel","ngModelChange"],[1,"form-text"],[1,"row","g-3"],[1,"col-6"],["name","scceso","required","",1,"form-select",3,"ngModel","ngModelChange"],["value","S"],["value","N"],["name","lectura","required","",1,"form-select",3,"ngModel","ngModelChange"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-outline-secondary"],["type","submit","data-bs-dismiss","modal",1,"btn","btn-primary",3,"disabled"],[1,"badge",3,"ngClass"],["title","Editar m\xf3dulo","aria-label","Editar m\xf3dulo",1,"btn","btn-sm","btn-primary","me-1",3,"click"],[1,"bi","bi-pencil"],["title","Eliminar m\xf3dulo","aria-label","Eliminar m\xf3dulo",1,"btn","btn-sm","btn-danger",3,"click"],[1,"bi","bi-trash"],["colspan","6",1,"text-center","py-3"]],template:function(s,t){if(1&s){const d=o.RV6();o.j41(0,"div",0)(1,"div",1)(2,"div",2),o.nrm(3,"i",3),o.j41(4,"h5",4),o.EFF(5,"Configuraci\xf3n - M\xf3dulos"),o.k0s()(),o.j41(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",8)(10,"span",9),o.nrm(11,"i",10),o.k0s(),o.j41(12,"input",11),o.bIt("ngModelChange",function(r){return t.filtro=r}),o.k0s()()(),o.j41(13,"div",12)(14,"button",13),o.nrm(15,"i",14),o.EFF(16," Nuevo M\xf3dulo "),o.k0s()()(),o.j41(17,"div",15)(18,"table",16)(19,"thead",17)(20,"tr")(21,"th",18),o.EFF(22,"ID"),o.k0s(),o.j41(23,"th",18),o.EFF(24,"Descripci\xf3n"),o.k0s(),o.j41(25,"th",18),o.EFF(26,"Acceso"),o.k0s(),o.j41(27,"th",18),o.EFF(28,"Lectura"),o.k0s(),o.j41(29,"th",18),o.EFF(30,"Permisos"),o.k0s(),o.j41(31,"th",18),o.EFF(32,"Acciones"),o.k0s()()(),o.j41(33,"tbody"),o.DNE(34,F,18,7,"tr",19),o.DNE(35,p,3,0,"tr",20),o.k0s()()()()()(),o.j41(36,"div",21)(37,"div",22)(38,"div",23)(39,"div",24)(40,"h5",25),o.EFF(41,"Agregar nuevo m\xf3dulo"),o.k0s(),o.nrm(42,"button",26),o.k0s(),o.j41(43,"form",27,28),o.bIt("ngSubmit",function(){o.eBV(d);const r=o.sdS(44);return o.Njj(t.crearModulo(r))}),o.j41(45,"div",29)(46,"div",30)(47,"label",31),o.EFF(48,"Descripci\xf3n"),o.k0s(),o.j41(49,"input",32),o.bIt("ngModelChange",function(r){return t.nuevo.descmodulo=r}),o.k0s(),o.j41(50,"div",33),o.EFF(51,"M\xe1ximo 30 caracteres"),o.k0s()(),o.j41(52,"div",34)(53,"div",35)(54,"label",31),o.EFF(55,"Acceso"),o.k0s(),o.j41(56,"select",36),o.bIt("ngModelChange",function(r){return t.nuevo.scceso=r}),o.j41(57,"option",37),o.EFF(58,"S\xed"),o.k0s(),o.j41(59,"option",38),o.EFF(60,"No"),o.k0s()()(),o.j41(61,"div",35)(62,"label",31),o.EFF(63,"Lectura"),o.k0s(),o.j41(64,"select",39),o.bIt("ngModelChange",function(r){return t.nuevo.lectura=r}),o.j41(65,"option",37),o.EFF(66,"S\xed"),o.k0s(),o.j41(67,"option",38),o.EFF(68,"No"),o.k0s()()()()(),o.j41(69,"div",40)(70,"button",41),o.EFF(71,"Cancelar"),o.k0s(),o.j41(72,"button",42),o.nrm(73,"i",14),o.EFF(74," Agregar "),o.k0s()()()()()()}if(2&s){const d=o.sdS(44);o.R7$(12),o.Y8G("ngModel",t.filtro),o.R7$(22),o.Y8G("ngForOf",t.listaFiltrada),o.R7$(1),o.Y8G("ngIf",0===(null==t.listaFiltrada?null:t.listaFiltrada.length)),o.R7$(14),o.Y8G("ngModel",t.nuevo.descmodulo),o.R7$(7),o.Y8G("ngModel",t.nuevo.scceso),o.R7$(8),o.Y8G("ngModel",t.nuevo.lectura),o.R7$(8),o.Y8G("disabled",!d.valid)}},dependencies:[u.YU,u.Sq,u.bT,n.qT,n.xH,n.y7,n.me,n.wz,n.BC,n.cb,n.YS,n.tU,n.vS,n.cV],styles:[".card[_ngcontent-%COMP%]{border-radius:.5rem}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{vertical-align:middle}.badge[_ngcontent-%COMP%]{font-size:.85rem}@media (max-width: 576px){.card-header[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:1rem}}"]})}}return l})();var f=i(1626);const v=[{path:"",component:M}];let j=(()=>{class l{static{this.\u0275fac=function(s){return new(s||l)}}static{this.\u0275mod=o.$C({type:l})}static{this.\u0275inj=o.G2t({imports:[u.MD,n.YN,f.q1,g.iI.forChild(v)]})}}return l})()}}]);