"use strict";(self.webpackChunkSaltorSystem=self.webpackChunkSaltorSystem||[]).push([[289],{2289:(x,d,n)=>{n.r(d),n.d(d,{ModuloChoferes:()=>B});var l=n(177),a=n(9417),m=n(8871),p=n(4412),g=n(152),b=n(3294),v=n(5558),k=n(8032),h=n.n(k),e=n(8699),F=n(8079);function j(i,f){if(1&i){const t=e.RV6();e.j41(0,"tr")(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s(),e.j41(7,"td",45)(8,"div",46),e.EFF(9),e.k0s()(),e.j41(10,"td")(11,"button",47),e.bIt("click",function(o){const c=e.eBV(t).$implicit;return e.XpG().editarChofer(c),e.Njj(o.stopPropagation())}),e.nrm(12,"i",48),e.k0s(),e.EFF(13," \xa0 "),e.j41(14,"button",47),e.bIt("click",function(){const s=e.eBV(t).$implicit,c=e.XpG();return e.Njj(c.eliminarChofer(s.codChofer))}),e.nrm(15,"i",49),e.k0s()()()}if(2&i){const t=f.$implicit;e.R7$(2),e.JRh(t.codChofer),e.R7$(2),e.JRh(t.nomChofer),e.R7$(2),e.JRh(t.cedChofer),e.R7$(2),e.Y8G("ngClass",t.statusChofer?"chofer-activo":"chofer-inactivo"),e.R7$(1),e.SpI(" ",t.statusChofer?"Activo":"Inactivo"," ")}}function _(i,f){if(1&i){const t=e.RV6();e.j41(0,"li",17)(1,"a",50),e.bIt("click",function(){const s=e.eBV(t).$implicit,c=e.XpG();return e.Njj(c.changePage(s))}),e.EFF(2),e.k0s()()}if(2&i){const t=f.$implicit,r=e.XpG();e.AVh("active",r.currentPage===t),e.R7$(2),e.JRh(t)}}function E(i,f){if(1&i&&(e.j41(0,"button",51),e.EFF(1),e.k0s()),2&i){const t=e.XpG();e.R7$(1),e.SpI(" ",t.modoedicionChofer?"Editar":"Guardar"," ")}}const P=[{path:"",component:(()=>{class i{constructor(t,r){this.fb=t,this.servicioChofer=r,this.totalItems=0,this.pageSize=8,this.currentPage=1,this.maxPagesToShow=5,this.txtdescripcion="",this.txtcodigo="",this.descripcion="",this.descripcionBuscar=new p.t(""),this.habilitarFormulario=!1,this.modoedicionChofer=!1,this.modoconsultaChofer=!1,this.choferList=[],this.selectedChofer=null,this.crearFormularioChofer(),this.descripcionBuscar.pipe((0,g.B)(500),(0,b.F)(),(0,v.n)(o=>(this.descripcion=o,this.servicioChofer.buscarTodosChofer(this.currentPage,this.pageSize,this.descripcion)))).subscribe(o=>{this.choferList=o.data,this.totalItems=o.pagination.total,this.currentPage=o.pagination.page})}onDescripcionInput(t){this.descripcionBuscar.next(t.target.value.toUpperCase())}seleccionarChofer(t){this.selectedChofer=i}ngOnInit(){this.buscarTodosChofer(1)}crearFormularioChofer(){this.formularioChofer=this.fb.group({cedChofer:["",a.k0.required],nomChofer:["",a.k0.required],statusChofer:[!0,a.k0.required]})}habilitarFormularioChofer(){this.habilitarFormulario=!1}nuevoChofer(){this.modoedicionChofer=!1,this.tituloModalChofer="Agregando Chofer",$("#modalchofer").modal("show"),this.habilitarFormulario=!0}cerrarModalChofer(){this.habilitarFormulario=!1,this.formularioChofer.reset(),this.modoedicionChofer=!1,this.modoconsultaChofer=!1,$("#modalchofer").modal("hide"),this.crearFormularioChofer()}editarChofer(t){this.choferid=t.codChofer,this.modoedicionChofer=!0,this.formularioChofer.patchValue(t),this.tituloModalChofer="Editando Chofer",$("#modalchofer").modal("show"),this.habilitarFormulario=!0}buscarTodosChofer(t){this.servicioChofer.buscarTodosChofer(t,this.pageSize).subscribe(r=>{console.log(r),this.choferList=r.data})}consultarChofer(t){this.tituloModalChofer="Consulta Chofer",this.formularioChofer.patchValue(t),$("#modalchofer").modal("show"),this.habilitarFormulario=!0,this.modoconsultaChofer=!0}eliminarChofer(t){h().fire({title:"\xbfEst\xe1 seguro de eliminar este Chofer?",text:"\xa1No podr\xe1 revertir esto!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si, eliminar!"}).then(r=>{r.isConfirmed&&this.servicioChofer.eliminarChofer(t).subscribe(o=>{h().fire({title:"Excelente!",text:"Chofer eliminado correctamente.",icon:"success",timer:3e3,showConfirmButton:!1}),this.buscarTodosChofer(this.currentPage)})})}descripcionEntra(t){this.descripcionBuscar.next(t.target.value.toUpperCase())}guardarChofer(){console.log(this.formularioChofer.value),this.formularioChofer.valid?this.modoedicionChofer?this.servicioChofer.editarChofer(this.choferid,this.formularioChofer.value).subscribe(t=>{h().fire({title:"Excelente!",text:"Chofer Editado correctamente.",icon:"success",timer:5e3,showConfirmButton:!1}),this.buscarTodosChofer(1),this.formularioChofer.reset(),this.crearFormularioChofer(),$("#modalchofer").modal("hide")}):this.servicioChofer.guardarChofer(this.formularioChofer.value).subscribe(t=>{h().fire({title:"Excelente!",text:"Chofer Guardado correctamente.",icon:"success",timer:3e3,showConfirmButton:!1}),this.buscarTodosChofer(1),this.formularioChofer.reset(),this.crearFormularioChofer(),$("#modalchofer").modal("hide")}):alert("Este Chofer no fue Guardado")}convertToUpperCase(t){const r=t.target,o=r.selectionStart,s=r.selectionEnd;r.value=r.value.toUpperCase(),null!==o&&null!==s&&r.setSelectionRange(o,s)}moveFocus(t,r){"Enter"===t.key&&r&&(t.preventDefault(),r.focus())}changePage(t){this.currentPage=t;const r=this.descripcionBuscar.getValue();this.servicioChofer.buscarTodosChofer(this.currentPage,this.pageSize,r).subscribe(o=>{this.choferList=o.data,this.totalItems=o.pagination.total,this.currentPage=t})}get totalPages(){return Math.ceil(this.totalItems/this.pageSize)}get pages(){const t=this.totalPages,r=this.currentPage,o=this.maxPagesToShow;if(t<=o)return Array.from({length:t},(C,u)=>u+1);const s=Math.max(1,r-Math.floor(o/2)),c=Math.min(t,s+o-1);return Array.from({length:c-s+1},(C,u)=>s+u)}limpiaBusqueda(){this.txtdescripcion="",this.txtcodigo="",this.buscarTodosChofer(1)}static{this.\u0275fac=function(r){return new(r||i)(e.rXU(a.ok),e.rXU(F.Y))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["Choferes"]],decls:83,vars:14,consts:[[1,"card",2,"height","87vh"],[1,"card-header"],[1,"card-body"],[1,"row"],[1,"col-3"],["for",""],["type","text","placeholder","Digite el Nombre...",1,"form-control","uppercase",3,"ngModel","ngModelChange","input"],[1,"col-2"],[1,"btn","btn-danger","mt-4",3,"click"],[1,"bi","bi-arrow-counterclockwise"],[1,"btn","btn-primary","mt-4",3,"click"],[1,"table-responsive",2,"max-height","400px","overflow-y","auto"],[1,"table","table-bordered","table-hover","table-striped","table-sm"],[1,"table-dark"],[4,"ngFor","ngForOf"],["aria-label","Page navigation"],[1,"pagination","justify-content-center"],[1,"page-item"],["aria-label","First",1,"page-link",3,"click"],["aria-hidden","true"],["aria-label","Previous",1,"page-link",3,"click"],["class","page-item",3,"active",4,"ngFor","ngForOf"],["aria-label","Next",1,"page-link",3,"click"],["aria-label","Last",1,"page-link",3,"click"],["id","modalchofer","tabindex","-1","aria-labelledby","modalSuplidorLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","modalSuplidorLabel",1,"modal-title","fs-5"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"mb-3"],[3,"formGroup","ngSubmit"],[1,"col"],[1,"form-group"],["for","su_rncSupl"],["type","text","formControlName","nomChofer",1,"form-control"],[1,"col-6"],["for","su_nomSupl"],["formControlName","cedChofer",1,"form-control"],[1,"form-check","mt-4"],["type","checkbox","formControlName","statusChofer","value","","id","flexCheckDefault",1,"form-check-input"],["for","flexCheckDefault",1,"form-check-label"],[1,"col","d-flex","justify-content-end"],["type","submit","class","btn btn-success",4,"ngIf"],[1,"text-center"],[3,"ngClass"],[1,"btn","btn-link",3,"click"],[1,"bi","bi-pencil","text-primary"],[1,"bi","bi-trash","text-danger"],[1,"page-link",3,"click"],["type","submit",1,"btn","btn-success"]],template:function(r,o){1&r&&(e.j41(0,"div",0)(1,"div",1)(2,"h1"),e.EFF(3,"Choferes"),e.k0s()(),e.j41(4,"div",2)(5,"div",3)(6,"div",4)(7,"label",5),e.EFF(8,"Buscar Nombre"),e.k0s(),e.j41(9,"input",6),e.bIt("ngModelChange",function(c){return o.txtdescripcion=c})("input",function(c){return o.onDescripcionInput(c)}),e.k0s()(),e.j41(10,"div",7)(11,"button",8),e.bIt("click",function(){return o.limpiaBusqueda()}),e.nrm(12,"i",9),e.k0s()(),e.j41(13,"div",7)(14,"button",10),e.bIt("click",function(){return o.nuevoChofer()}),e.EFF(15," Nuevo Chofer "),e.k0s()()(),e.nrm(16,"br"),e.j41(17,"div",11)(18,"table",12)(19,"thead",13)(20,"tr")(21,"th"),e.EFF(22,"C\xf3digo"),e.k0s(),e.j41(23,"th"),e.EFF(24,"Nombre"),e.k0s(),e.j41(25,"th"),e.EFF(26,"C\xe9dula"),e.k0s(),e.j41(27,"th"),e.EFF(28,"Status"),e.k0s(),e.nrm(29,"th"),e.k0s()(),e.j41(30,"tbody"),e.DNE(31,j,16,5,"tr",14),e.k0s()()(),e.j41(32,"nav",15)(33,"ul",16)(34,"li",17)(35,"a",18),e.bIt("click",function(){return o.changePage(1)}),e.j41(36,"span",19),e.EFF(37,"\xab\xab"),e.k0s()()(),e.j41(38,"li",17)(39,"a",20),e.bIt("click",function(){return o.changePage(o.currentPage-1)}),e.j41(40,"span",19),e.EFF(41,"\xab"),e.k0s()()(),e.DNE(42,_,3,3,"li",21),e.j41(43,"li",17)(44,"a",22),e.bIt("click",function(){return o.changePage(o.currentPage+1)}),e.j41(45,"span",19),e.EFF(46,"\xbb"),e.k0s()()(),e.j41(47,"li",17)(48,"a",23),e.bIt("click",function(){return o.changePage(o.totalPages)}),e.j41(49,"span",19),e.EFF(50,"\xbb\xbb"),e.k0s()()()()(),e.j41(51,"div",24)(52,"div",25)(53,"div",26)(54,"div",27)(55,"h1",28),e.EFF(56),e.k0s(),e.j41(57,"button",29),e.bIt("click",function(){return o.cerrarModalChofer()}),e.k0s()(),e.j41(58,"div",30)(59,"div",31)(60,"form",32),e.bIt("ngSubmit",function(){return o.guardarChofer()}),e.j41(61,"div",3)(62,"div",33)(63,"div",34)(64,"label",35),e.EFF(65,"Nombre de chofer"),e.k0s(),e.nrm(66,"input",36),e.k0s()()(),e.nrm(67,"br"),e.j41(68,"div",3)(69,"div",37)(70,"div",34)(71,"label",38),e.EFF(72,"C\xe9dula chofer"),e.k0s(),e.nrm(73,"input",39),e.k0s()(),e.j41(74,"div",37)(75,"div",40),e.nrm(76,"input",41),e.j41(77,"label",42),e.EFF(78," Status "),e.k0s()()()(),e.nrm(79,"br"),e.j41(80,"div",3)(81,"div",43),e.DNE(82,E,2,1,"button",44),e.k0s()()()()()()()()()()),2&r&&(e.R7$(9),e.Y8G("ngModel",o.txtdescripcion),e.R7$(22),e.Y8G("ngForOf",o.choferList),e.R7$(3),e.AVh("disabled",1===o.currentPage),e.R7$(4),e.AVh("disabled",1===o.currentPage),e.R7$(4),e.Y8G("ngForOf",o.pages),e.R7$(1),e.AVh("disabled",o.currentPage===o.totalPages),e.R7$(4),e.AVh("disabled",o.currentPage===o.totalPages),e.R7$(9),e.SpI(" ",o.tituloModalChofer," "),e.R7$(4),e.Y8G("formGroup",o.formularioChofer),e.R7$(22),e.Y8G("ngIf",!o.modoconsultaChofer))},dependencies:[l.YU,l.Sq,l.bT,a.qT,a.me,a.Zm,a.BC,a.cb,a.j4,a.JD,a.vS],styles:[".chofer-activo[_ngcontent-%COMP%]{height:22px;width:80px;background-color:#529fbb;border-radius:8px;color:#fff;font-size:14px;text-align:center}.chofer-inactivo[_ngcontent-%COMP%]{height:22px;width:80px;background-color:#707271;border-radius:8px;color:#fff;font-size:14px;text-align:center}"]})}}return i})()}];let T=(()=>{class i{static{this.\u0275fac=function(r){return new(r||i)}}static{this.\u0275mod=e.$C({type:i})}static{this.\u0275inj=e.G2t({imports:[m.iI.forChild(P),m.iI]})}}return i})(),B=(()=>{class i{static{this.\u0275fac=function(r){return new(r||i)}}static{this.\u0275mod=e.$C({type:i})}static{this.\u0275inj=e.G2t({imports:[l.MD,T,a.X1,a.YN]})}}return i})()}}]);