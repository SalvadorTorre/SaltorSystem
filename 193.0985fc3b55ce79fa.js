"use strict";(self.webpackChunkSaltorSystem=self.webpackChunkSaltorSystem||[]).push([[193],{8193:(H,j,d)=>{d.r(j),d.d(j,{ModuloVentainterna:()=>L});var p=d(177),y=d(8871),l=d(9417),f=d(4412),b=d(152),V=d(3294),v=d(5558),F=d(8141),C=d(5964),T=d(8032),m=d.n(T),t=d(8699),x=d(9287);let E=(()=>{class s{constructor(e){this.http=e}guardarVentainterna(e){return this.http.PostRequest("/ventainterna",e)}editarVentainterna(e,i){return this.http.PutRequest(`/ventainterna/${e}`,i)}buscarTodasVentainterna(e,i){let n=`/ventainterna?page=${e}&limit=${i}`;return console.log(n),this.http.GetRequest(n)}eliminarVentainterna(e){return this.http.DeleteRequest(`/eliminar-ventainterna/${e}`,"")}buscarVentainternaPorNombre(e,i,n){return this.http.GetRequest(`/ventainterna/${n}`)}buscarVentainternaDetalle(e){return this.http.GetRequest(`/detalle-ventainterna/${e}`)}buscarVentainterna(e,i,n,a,o){let r=`/ventainterna-numero?page=${e}&limit=${i}`;return n&&(r+=`&codigo=${n}`),a&&(r+=`&nomcliente=${a}`),o&&(r+=`&fecha=${o}`),this.http.GetRequest(r)}static{this.\u0275fac=function(i){return new(i||s)(t.KVO(x.a))}}static{this.\u0275prov=t.jDH({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})();var w=d(3290),M=d(9743),P=d(6687);const G=["inputCodmerc"],S=["descripcionInput"],R=["Tabladetalle"],B=["buscarcodmercInput"];function N(s,u){if(1&s){const e=t.RV6();t.j41(0,"tr")(1,"td",20),t.EFF(2),t.k0s(),t.j41(3,"td",21),t.EFF(4),t.k0s(),t.j41(5,"td",22),t.EFF(6),t.k0s(),t.j41(7,"td",91),t.EFF(8),t.k0s(),t.j41(9,"td")(10,"i",92),t.bIt("click",function(){const a=t.eBV(e).$implicit,o=t.XpG();return t.Njj(o.editarVentainterna(a))}),t.k0s(),t.j41(11,"i",93),t.bIt("click",function(){const a=t.eBV(e).$implicit,o=t.XpG();return t.Njj(o.eliminarVentainterna(a.fa_codFact))}),t.k0s(),t.j41(12,"i",94),t.bIt("click",function(){const a=t.eBV(e).$implicit,o=t.XpG();return t.Njj(o.consultarVentainterna(a))}),t.k0s(),t.j41(13,"a",95),t.nrm(14,"i",96),t.k0s(),t.j41(15,"a",95),t.nrm(16,"i",97),t.k0s()()()}if(2&s){const e=u.$implicit;t.R7$(2),t.JRh(e.fa_codFact),t.R7$(2),t.JRh(e.fa_nomClie),t.R7$(2),t.SpI(" ",e.fa_fecFact," "),t.R7$(2),t.SpI(" ",e.fa_valFact," ")}}function D(s,u){if(1&s){const e=t.RV6();t.j41(0,"li",28)(1,"a",98),t.bIt("click",function(){const a=t.eBV(e).$implicit,o=t.XpG();return t.Njj(o.changePage(a))}),t.EFF(2),t.k0s()()}if(2&s){const e=u.$implicit,i=t.XpG();t.AVh("active",i.currentPage===e),t.R7$(2),t.JRh(e)}}function A(s,u){if(1&s){const e=t.RV6();t.j41(0,"div",99)(1,"a",100),t.bIt("click",function(){const a=t.eBV(e).$implicit,o=t.XpG();return t.Njj(o.cargarDatosCliente(a))}),t.nrm(2,"i",101),t.EFF(3),t.k0s()()}if(2&s){const e=u.$implicit,i=u.index,n=t.XpG();t.AVh("active",i===n.selectedIndex),t.R7$(3),t.SpI("\xa0\xa0",e.cl_nomClie," ")}}function O(s,u){1&s&&(t.j41(0,"div")(1,"small",102),t.EFF(2,"Este campo es obligatorio."),t.k0s()())}function U(s,u){if(1&s){const e=t.RV6();t.j41(0,"div",99)(1,"a",100),t.bIt("click",function(){const a=t.eBV(e).$implicit,o=t.XpG();return t.Njj(o.cargarDatosInventario(a))}),t.nrm(2,"i",101),t.EFF(3),t.k0s()()}if(2&s){const e=u.$implicit,i=u.index,n=t.XpG();t.AVh("active",i===n.selectedIndexcodmerc),t.R7$(3),t.SpI("\xa0\xa0",e.in_codmerc," ")}}function X(s,u){if(1&s){const e=t.RV6();t.j41(0,"div",99)(1,"a",100),t.bIt("click",function(){const a=t.eBV(e).$implicit,o=t.XpG();return t.Njj(o.cargarDatosInventario(a))}),t.nrm(2,"i",101),t.EFF(3),t.k0s()()}if(2&s){const e=u.$implicit,i=u.index,n=t.XpG();t.AVh("active",i===n.selectedIndexcoddescripcionmerc),t.R7$(3),t.SpI("\xa0\xa0",e.in_desmerc," ")}}function Y(s,u){if(1&s){const e=t.RV6();t.j41(0,"i",92),t.bIt("click",function(){t.eBV(e);const n=t.XpG().$implicit,a=t.XpG();return t.Njj(a.editarItem(n))}),t.k0s()}}function z(s,u){if(1&s){const e=t.RV6();t.j41(0,"i",93),t.bIt("click",function(){t.eBV(e);const n=t.XpG().$implicit,a=t.XpG();return t.Njj(a.borarItem(n))}),t.k0s()}}function q(s,u){if(1&s&&(t.j41(0,"tr")(1,"td",82),t.EFF(2),t.k0s(),t.j41(3,"td",83),t.EFF(4),t.k0s(),t.j41(5,"td",84),t.EFF(6),t.k0s(),t.j41(7,"td",84),t.EFF(8),t.k0s(),t.j41(9,"td",103),t.EFF(10),t.nI1(11,"currency"),t.k0s(),t.j41(12,"td"),t.DNE(13,Y,1,0,"i",104),t.DNE(14,z,1,0,"i",105),t.k0s()()),2&s){const e=u.$implicit,i=t.XpG();t.R7$(2),t.SpI(" ",null==e.producto?null:e.producto.in_codmerc," "),t.R7$(2),t.SpI(" ",null==e.producto?null:e.producto.in_desmerc," "),t.R7$(2),t.SpI(" ",e.cantidad," "),t.R7$(2),t.SpI(" ",e.precio," "),t.R7$(2),t.SpI(" ",t.bMT(11,7,e.total)," "),t.R7$(3),t.Y8G("ngIf",i.habilitarIcono),t.R7$(1),t.Y8G("ngIf",i.habilitarIcono)}}const I=function(s){return{show:s}},J=[{path:"",component:(()=>{class s{constructor(e,i,n,a,o,r){this.fb=e,this.servicioVentainterna=i,this.servicioCliente=n,this.http=a,this.servicioInventario=o,this.ServicioUsuario=r,this.totalItems=0,this.pageSize=12,this.currentPage=1,this.maxPagesToShow=5,this.txtdescripcion="",this.txtcodigo="",this.txtfecha="",this.descripcion="",this.codigo="",this.fecha="",this.descripcionBuscar=new f.t(""),this.codigoBuscar=new f.t(""),this.fechaBuscar=new f.t(""),this.habilitarFormulario=!1,this.modoedicionVentainterna=!1,this.modoconsultaVentainterna=!1,this.ventainternaList=[],this.detVentainternaList=[],this.selectedVentainterna=null,this.items=[],this.totalGral=0,this.totalItbis=0,this.subTotal=0,this.codmerc="",this.descripcionmerc="",this.cantidadmerc=0,this.preciomerc=0,this.precioform=new l.MJ,this.cantidadform=new l.MJ,this.isEditing=!1,this.itemToEdit=null,this.codnotfound=!1,this.desnotfound=!1,this.mensagePantalla=!1,this.codmerVacio=!1,this.desmerVacio=!1,this.habilitarCampos=!1,this.sucursales=[],this.sucursalSeleccionada=null,this.habilitarIcono=!0,this.codigoSubject=new f.t(""),this.nomclienteSubject=new f.t(""),this.isDisabled=!0,this.buscarNombre=new l.MJ,this.resultadoNombre=[],this.selectedIndex=1,this.buscarcodmerc=new l.MJ,this.buscardescripcionmerc=new l.MJ,this.nativeElement=new l.MJ,this.resultadoCodmerc=[],this.selectedIndexcodmerc=1,this.resultadodescripcionmerc=[],this.selectedIndexcoddescripcionmerc=1,this.cancelarBusquedaDescripcion=!1,this.cancelarBusquedaCodigo=!1,this.form=this.fb.group({fa_codvend:["",l.k0.required]}),this.crearFormularioVentainterna(),console.log(this.formularioVentainterna.value),this.nomclienteSubject.pipe((0,b.B)(500),(0,V.F)(),(0,v.n)(c=>(this.txtdescripcion=c,this.servicioVentainterna.buscarVentainterna(this.currentPage,this.pageSize,this.codigo,this.txtdescripcion)))).subscribe(c=>{this.ventainternaList=c.data,this.totalItems=c.pagination.total,this.currentPage=c.pagination.page})}agregarVentainterna(){this.formularioVentainterna.disable()}crearformulariodetVentainterna(){this.formulariodetVentainterna=this.fb.group({df_codFact:[""],df_codMerc:[""],df_desMerc:[""],df_canmerc:[""],df_preMerc:[""],df_valMerc:[""],df_unidad:[""],df_cosMerc:[""],dF_codClie:[""],df_status:[""]})}seleccionarVentainterna(e){this.selectedVentainterna=e}ngOnInit(){this.buscarTodasVentainterna(1),this.buscarcodmerc.valueChanges.pipe((0,b.B)(50),(0,V.F)(),(0,F.M)(()=>{this.resultadoCodmerc=[]}),(0,C.p)(e=>""!==e.trim()&&!this.cancelarBusquedaCodigo&&!this.isEditing),(0,v.n)(e=>this.http.GetRequest(`/productos-buscador/${e}`))).subscribe(e=>{if(console.log(e.data),!e)return this.resultadoCodmerc=[],this.codnotfound=!1,void console.log("paso blanco");Array.isArray(e.data)&&e.data.length?(this.resultadoCodmerc=e.data.sort((i,n)=>i.in_codmerc.localeCompare(n.in_codmerc,void 0,{numeric:!0,sensitivity:"base"})),this.selectedIndex=-1,this.codnotfound=!1):this.codnotfound=!0}),this.buscardescripcionmerc.valueChanges.pipe((0,b.B)(50),(0,V.F)(),(0,F.M)(()=>{this.resultadodescripcionmerc=[]}),(0,C.p)(e=>""!==e&&!this.cancelarBusquedaDescripcion&&!this.isEditing),(0,v.n)(e=>this.http.GetRequest(`/productos-buscador-desc/${e}`))).subscribe(e=>{console.log(e.data),e?Array.isArray(e.data)&&e.data.length?(this.resultadodescripcionmerc=e.data,this.desnotfound=!1):this.desnotfound=!0:(this.resultadodescripcionmerc=[],this.desnotfound=!1,console.log("2"))}),this.buscarNombre.valueChanges.pipe((0,b.B)(500),(0,V.F)(),(0,F.M)(()=>{this.resultadoNombre=[]}),(0,C.p)(e=>""!==e),(0,v.n)(e=>this.http.GetRequest(`/cliente-nombre/${e}`))).subscribe(e=>{console.log(e.data),e?Array.isArray(e.data)&&(this.resultadoNombre=e.data):this.resultadoNombre=[]})}crearFormularioVentainterna(){const i=this.formatofecha(new Date);this.formularioVentainterna=this.fb.group({fa_codFact:[""],fa_fecFact:[i],fa_valFact:[""],fa_codClie:[""],fa_nomClie:[""],fa_codVend:["",l.k0.required],fa_nomVend:[""],fa_solicitud:[""]}),console.log(this.formularioVentainterna.value)}habilitarFormularioVentainterna(){this.habilitarFormulario=!1}nuevaVentainterna(){this.modoedicionVentainterna=!1,this.tituloModalVentainterna="Nueva Ventainterna",$("#modalventainterna").modal("show"),this.habilitarFormulario=!0,this.formularioVentainterna.get("fa_codFact").disable(),this.formularioVentainterna.get("fa_fecFact").disable(),this.formularioVentainterna.get("fa_nomVend").disable(),setTimeout(()=>{$("#input1").focus()},500)}cerrarModalVentainterna(){this.habilitarFormulario=!1,this.formularioVentainterna.reset(),this.modoedicionVentainterna=!1,this.modoconsultaVentainterna=!1,this.mensagePantalla=!1,$("#modalventainterna").modal("hide"),this.crearFormularioVentainterna(),this.buscarTodasVentainterna(1),this.limpiarTabla(),this.limpiarCampos(),this.habilitarIcono=!0,document.querySelectorAll(".seccion-productos input").forEach(i=>{i.disabled=!1})}editardetVentainterna(e){this.ventainternaid=e.df_codFact}editarVentainterna(e){this.ventainternaid=e.fa_codFact,this.modoedicionVentainterna=!0,this.formularioVentainterna.patchValue(e),this.tituloModalVentainterna="Editando Ventainterna",$("#modalventainterna").modal("show"),this.habilitarFormulario=!0,document.querySelectorAll(".seccion-productos input").forEach(n=>{n.disabled=!0}),this.items=[],this.servicioVentainterna.buscarVentainternaDetalle(e.fa_codFact).subscribe(n=>{let r=0;n.data.forEach(h=>{const _=h.dc_canmerc,g=h.dc_premerc;this.items.push({producto:{in_codmerc:h.dc_codmerc,in_desmerc:h.dc_descrip,in_grumerc:"",in_tipoproduct:"",in_canmerc:0,in_caninve:0,in_fecinve:null,in_eximini:0,in_cosmerc:0,in_premerc:0,in_precmin:0,in_costpro:0,in_ucosto:0,in_porgana:0,in_peso:0,in_longitud:0,in_unidad:0,in_medida:0,in_longitu:0,in_fecmodif:null,in_amacen:0,in_imagen:"",in_status:"",in_itbis:!1,in_minvent:0},cantidad:_,precio:g,total:_*g})}),r=0,this.subTotal=0,this.totalGral=0})}buscarTodasVentainterna(e){this.servicioVentainterna.buscarTodasVentainterna(e,this.pageSize).subscribe(i=>{console.log(i),this.ventainternaList=i.data})}consultarVentainterna(e){this.modoconsultaVentainterna=!0,this.formularioVentainterna.patchValue(e),this.tituloModalVentainterna="Consulta Ventainterna",$("#modalventainterna").modal("show"),this.habilitarFormulario=!0,this.formularioVentainterna.disable(),this.habilitarIcono=!1,document.querySelectorAll(".seccion-productos input").forEach(n=>{n.disabled=!0}),this.items=[],this.servicioVentainterna.buscarVentainternaDetalle(e.fa_codFact).subscribe(n=>{let a=0,r=0;n.data.forEach(c=>{const k=c.dc_canmerc,_=c.dc_premerc,g=k*_;this.items.push({producto:{in_codmerc:c.dc_codmerc,in_desmerc:c.dc_descrip,in_grumerc:"",in_tipoproduct:"",in_canmerc:0,in_caninve:0,in_fecinve:null,in_eximini:0,in_cosmerc:0,in_premerc:0,in_precmin:0,in_costpro:0,in_ucosto:0,in_porgana:0,in_peso:0,in_longitud:0,in_unidad:0,in_medida:0,in_longitu:0,in_fecmodif:null,in_amacen:0,in_imagen:"",in_status:"",in_itbis:!1,in_minvent:0},cantidad:k,precio:_,total:g}),a+=g}),r=a,this.subTotal=a,this.totalGral=r})}eliminarVentainterna(e){m().fire({title:"\xbfEst\xe1 seguro de eliminar este Ventainterna?",text:"\xa1No podr\xe1 revertir esto!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si, eliminar!"}).then(i=>{i.isConfirmed&&this.servicioVentainterna.eliminarVentainterna(e).subscribe(n=>{m().fire({title:"Excelente!",text:"Empresa eliminado correctamente.",icon:"success",timer:2e3,showConfirmButton:!1}),this.buscarTodasVentainterna(this.currentPage)})})}descripcionEntra(e){this.nomclienteSubject.next(e.target.value.toUpperCase())}codigoEntra(e){this.codigoBuscar.next(e.target.value.toUpperCase())}fechaEntra(e){this.codigoBuscar.next(e.target.value.toUpperCase())}guardarVentainterna(){this.formularioVentainterna.get("fa_valFact")?.patchValue(this.totalGral),this.formularioVentainterna.get("fa_codFact").enable(),this.formularioVentainterna.get("fa_fecFact").enable(),this.formularioVentainterna.get("fa_nomVend").enable();const i={ventainterna:this.formularioVentainterna.value,detalle:this.items,idVentainterna:this.formularioVentainterna.get("fa_codFact")?.value};this.formularioVentainterna.valid?this.modoedicionVentainterna?this.servicioVentainterna.editarVentainterna(this.ventainternaid,this.formularioVentainterna.value).subscribe(n=>{m().fire({title:"Excelente!",text:"Ventainterna Editada correctamente.",icon:"success",timer:5e3,showConfirmButton:!1}),this.buscarTodasVentainterna(1),this.formularioVentainterna.reset(),this.crearFormularioVentainterna(),$("#modalventainterna").modal("hide")}):this.formularioVentainterna.valid?this.servicioVentainterna.guardarVentainterna(i).subscribe(n=>{m().fire({title:"Excelente!",text:"Ventainterna creada correctamente.",icon:"success",timer:1e3,showConfirmButton:!1}),this.buscarTodasVentainterna(1),this.formularioVentainterna.reset(),this.crearFormularioVentainterna(),this.formularioVentainterna.enable(),$("#modalventainterna").modal("hide")}):console.log(this.formularioVentainterna.value):alert("Esta Empresa no fue Guardado")}convertToUpperCase(e){const i=e.target,n=i.selectionStart,a=i.selectionEnd;i.value=i.value.toUpperCase(),null!==n&&null!==a&&i.setSelectionRange(n,a)}moveFocus(e,i){"Enter"===e.key&&i&&(e.preventDefault(),i.focus())}changePage(e){this.currentPage=e,this.descripcionBuscar.getValue(),this.servicioVentainterna.buscarTodasVentainterna(this.currentPage,this.pageSize).subscribe(n=>{this.ventainternaList=n.data,this.totalItems=n.pagination.total,this.currentPage=e,this.formularioVentainterna.reset()})}get totalPages(){return Math.ceil(this.totalItems/this.pageSize)}get pages(){const e=this.totalPages,i=this.currentPage,n=this.maxPagesToShow;if(e<=n)return Array.from({length:e},(r,c)=>c+1);const a=Math.max(1,i-Math.floor(n/2)),o=Math.min(e,a+n-1);return Array.from({length:o-a+1},(r,c)=>a+c)}limpiaBusqueda(){this.txtdescripcion="",this.txtcodigo="",this.txtfecha="",this.buscarTodasVentainterna(1)}agregaItem(e){if(e.preventDefault(),this.isEditing)console.log("editando"),this.itemToEdit.producto=this.productoselect,this.itemToEdit.codmerc=this.codmerc,this.itemToEdit.descripcionmerc=this.descripcionmerc,this.itemToEdit.precio=this.preciomerc,this.itemToEdit.cantidad=this.cantidadmerc,this.itemToEdit.total=this.cantidadmerc*this.preciomerc,this.actualizarTotales(),this.isEditing=!1,this.itemToEdit=null;else{if(!this.productoselect||this.cantidadmerc<=0||this.preciomerc<=0)return this.mensagePantalla=!0,void m().fire({icon:"error",title:"A V I S O",text:"Por favor complete todos los campos requeridos antes de agregar el \xedtem."}).then(()=>{this.mensagePantalla=!1});const i=this.cantidadmerc*this.preciomerc;this.totalGral+=i,this.totalItbis+=.18*i,this.subTotal+=i,this.items.push({producto:this.productoselect,cantidad:this.cantidadmerc,precio:this.preciomerc,total:i}),this.cancelarBusquedaDescripcion=!1,this.cancelarBusquedaCodigo=!1}this.limpiarCampos()}limpiarCampos(){this.codmerc="",this.descripcionmerc="",this.preciomerc=0,this.cantidadmerc=0,this.isEditing=!1}limpiarTabla(){this.items=[],this.totalGral=0,this.subTotal=0}borarItem(e){const i=this.items.indexOf(e);i>-1&&(this.totalGral-=e.total,this.subTotal-=e.total,this.items.splice(i,1))}editarItem(e){this.index_item=this.items.indexOf(e),this.isEditing=!0,this.itemToEdit=e,this.productoselect=e.producto,this.codmerc=e.producto.in_codmerc,this.descripcionmerc=e.producto.in_desmerc,this.preciomerc=e.precio,this.cantidadmerc=e.cantidad}actualizarTotales(){this.totalGral=this.items.reduce((e,i)=>e+i.total,0),this.subTotal=this.items.reduce((e,i)=>e+i.total,0)}buscarPorCodigo(e){}buscarClienteporNombre(){this.servicioCliente.buscarporNombre(this.formularioVentainterna.get("fa_nomClie").value).subscribe(e=>{console.log(e)})}formatofecha(e){const i=e.getFullYear(),n=(e.getMonth()+1).toString().padStart(2,"0");return`${e.getDate().toString().padStart(2,"0")}/${n}/${i}`}cargarDatosCliente(e){this.resultadoNombre=[],this.buscarNombre.reset(),""!==e.cl_nomClie&&this.formularioVentainterna.patchValue({fa_codClie:e.cl_codClie,fa_nomClie:e.cl_nomClie})}handleKeydown(e){const i=e.key,n=this.resultadoNombre.length-1;"ArrowDown"===i?(console.log("paso 56"),this.selectedIndex<n?this.selectedIndex++:this.selectedIndex=0,e.preventDefault()):"ArrowUp"===i?(console.log("paso 677"),this.selectedIndex>0?this.selectedIndex--:this.selectedIndex=n,e.preventDefault()):"Enter"===i&&(this.selectedIndex>=0&&this.selectedIndex<=n&&this.cargarDatosCliente(this.resultadoNombre[this.selectedIndex]),e.preventDefault())}cargarDatosInventario(e){console.log(e),this.resultadoCodmerc=[],this.resultadodescripcionmerc=[],this.codmerc=e.in_codmerc,this.preciomerc=e.in_premerc,this.descripcionmerc=e.in_desmerc,this.productoselect=e,this.cancelarBusquedaDescripcion=!0,this.cancelarBusquedaCodigo=!0,this.formularioVentainterna.patchValue({df_codMerc:e.in_codmerc,df_desMerc:e.in_desmerc,df_canMerc:e.in_canmerc,df_preMerc:e.in_premerc,df_cosMerc:e.in_cosmerc,df_unidad:e.in_unidad}),$("#input6").focus(),$("#input6").select()}handleKeydownInventario(e){const i=e.key,n=this.resultadoCodmerc.length;"ArrowDown"===i?(console.log("paso"),this.selectedIndexcodmerc=this.selectedIndexcodmerc<n?this.selectedIndexcodmerc+1:0,e.preventDefault()):"ArrowUp"===i?(console.log("paso2"),this.selectedIndexcodmerc=this.selectedIndexcodmerc>0?this.selectedIndexcodmerc-1:n,e.preventDefault()):"Enter"===i&&(this.selectedIndexcodmerc>=0&&this.selectedIndexcodmerc<=n&&this.cargarDatosInventario(this.resultadoCodmerc[this.selectedIndexcodmerc]),e.preventDefault())}handleKeydownInventariosdesc(e){const i=e.key,n=this.resultadodescripcionmerc.length;"ArrowDown"===i?(this.selectedIndexcoddescripcionmerc=this.selectedIndexcoddescripcionmerc<n?this.selectedIndexcoddescripcionmerc+1:0,e.preventDefault()):"ArrowUp"===i?(this.selectedIndexcoddescripcionmerc=this.selectedIndexcoddescripcionmerc>0?this.selectedIndexcoddescripcionmerc-1:n,e.preventDefault()):"Enter"===i&&(this.selectedIndexcoddescripcionmerc>=0&&this.selectedIndexcoddescripcionmerc<=n&&this.cargarDatosInventario(this.resultadodescripcionmerc[this.selectedIndexcoddescripcionmerc]),e.preventDefault())}onEnter(e,i){const n=e*i;this.totalGral+=n,this.subTotal+=n,this.items.push({producto:this.productoselect,cantidad:e,precio:i,total:n})}buscarUsuario(e,i){e.preventDefault();const n=this.formularioVentainterna.get("fa_codVend")?.value;if(!n)return this.mensagePantalla=!0,void m().fire({icon:"error",title:"A V I S O",text:"Codigo de usuario invalido."}).then(()=>{this.mensagePantalla=!1});this.ServicioUsuario.buscarUsuarioPorClave(n).subscribe(a=>{if(!a.data.length)return this.mensagePantalla=!0,void m().fire({icon:"error",title:"A V I S O",text:"Codigo de usuario invalido."}).then(()=>{this.mensagePantalla=!1});this.formularioVentainterna.patchValue({fa_nomVend:a.data[0].idUsuario}),i?.focus(),console.log(a.data[0].idUsuario)})}moveFocuscodmerc(e,i){if("Enter"===e.key||"Tab"===e.key){if(e.preventDefault(),this.codmerVacio=""===e.target.value.trim(),this.codnotfound)return console.log(this.codnotfound),this.mensagePantalla=!0,m().fire({icon:"error",title:"A V I S O",text:"Codigo invalido.",focusConfirm:!0,allowEnterKey:!0}).then(()=>{this.mensagePantalla=!1}),this.codmerVacio=!1,this.codnotfound=!1,this.codmerc="",void(this.descripcionmerc="");!0===this.codmerVacio?(i.focus(),this.codmerVacio=!1,console.log("vedadero")):($("#input6").focus(),$("#input6").select()),this.codmerVacio=!1}}moveFocusdesc(e,i){if("Enter"===e.key||"Tab"===e.key){if(e.preventDefault(),""===e.target.value.trim()&&(this.desmerVacio=!0,console.log("vedadero")),this.desnotfound)return this.mensagePantalla=!0,m().fire({icon:"error",title:"A V I S O",text:"Codigo invalido."}).then(()=>{this.mensagePantalla=!1}),void(this.desnotfound=!0);if(!0===this.desmerVacio)return this.mensagePantalla=!0,m().fire({icon:"error",title:"A V I S O",text:"Codigo invalido."}).then(()=>{this.mensagePantalla=!1}),void(this.desnotfound=!0);$("#input6").focus(),$("#input6").select(),this.desmerVacio=!1}}moveFocusCantidad(e,i){if("Enter"===e.key||"Tab"===e.key){if(e.preventDefault(),!this.productoselect||this.cantidadmerc<=0)return this.mensagePantalla=!0,void m().fire({icon:"error",title:"A V I S O",text:"Por favor complete todos los campos requeridos antes de agregar el \xedtem."}).then(()=>{this.mensagePantalla=!1});$("#input7").focus(),$("#input7").select()}}moveFocusnomclie(e,i){e.preventDefault(),console.log(i),e.target instanceof HTMLInputElement&&(e.target.value?i.focus():(this.mensagePantalla=!0,m().fire({icon:"error",title:"A V I S O",text:"Por favor complete el campo Nombre del Cliente Para Poder continual."}).then(()=>{this.mensagePantalla=!1})))}submitForm(){this.mensagePantalla&&this.form.invalid?(console.log(this.mensagePantalla),console.log(this.form.invalid)):(console.log(this.mensagePantalla),console.log(this.form.invalid),this.cerrarModalVentainterna())}onBlur(e){const i=e.target.value;i&&""!==i.trim()&&this.formularioVentainterna.get("fae_nomClie").setValue(i.trim())}static{this.\u0275fac=function(i){return new(i||s)(t.rXU(l.ok),t.rXU(E),t.rXU(w.d),t.rXU(x.a),t.rXU(M.M),t.rXU(P.f))}}static{this.\u0275cmp=t.VBU({type:s,selectors:[["Ventainterna"]],viewQuery:function(i,n){if(1&i&&(t.GBs(G,5),t.GBs(S,5),t.GBs(R,5),t.GBs(B,5)),2&i){let a;t.mGM(a=t.lsd())&&(n.inputCodmerc=a.first),t.mGM(a=t.lsd())&&(n.descripcionInput=a.first),t.mGM(a=t.lsd())&&(n.Tabladetalle=a.first),t.mGM(a=t.lsd())&&(n.buscarcodmercElement=a.first)}},decls:207,vars:48,consts:[[1,"container"],[1,"row"],[1,"col"],[1,"card"],[1,"card-header",2,"height","60px","background-color","#ef1008"],[1,"card-title",2,"color","white","text-align","center"],[1,"card-body",2,"background-color","#fcfdfd"],[1,"col-2"],["for",""],["type","text","placeholder","No. Cotizaci\xf3n",1,"form-control"],[1,"col-5"],["type","text","placeholder","Nombre Cliente",1,"form-control","uppercase",3,"ngModel","ngModelChange","input"],["type","date","placeholder","Fecha...",1,"form-control","form-control-sm"],[1,"col-1"],[1,"btn","btn-danger","mt-3",3,"click"],[1,"bi","bi-arrow-counterclockwise"],[1,"btn","btn-primary","mt-4",3,"click"],[1,"table-responsive",2,"height","400px","overflow-y","auto"],[1,"table","table-bordered","table-hover","table-striped","table-sm","table-class"],[1,"table-dark"],[2,"width","10%"],[2,"width","45%"],[1,"text-center",2,"width","10%"],[2,"width","12%"],[1,"text-center"],[4,"ngFor","ngForOf"],["aria-label","Page navigation"],[1,"pagination","justify-content-center"],[1,"page-item"],["aria-label","First",1,"page-link",3,"click"],["aria-hidden","true"],["aria-label","Previous",1,"page-link",3,"click"],["class","page-item",3,"active",4,"ngFor","ngForOf"],["aria-label","Next",1,"page-link",3,"click"],["aria-label","Last",1,"page-link",3,"click"],["id","modalventainterna","tabindex","-1","aria-labelledby","tituloModalVentainterna","aria-hidden","true","data-bs-backdrop","static","data-bs-keyboard","false",1,"modal","fade"],[1,"modal-dialog","modal-dialog-centered","modal-xl",2,"margin","2px auto"],[1,"modal-content"],[1,"modal-header",2,"height","10px"],["id","tituloModalVentainterna",1,"modal-title","fs-5"],["type","button","aria-label","Close","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"custom-form-background",3,"formGroup","ngSubmit"],[1,"col-8"],[1,"card",2,"margin-top","0","margin-bottom","0px","padding-top","0px","padding-bottom","0px"],[1,"card-body",2,"background-color","#e6e4e4","margin-top","0","padding-top","0","padding-bottom","0"],[1,"col","d-flex","justify-content-center"],["role","group","aria-label","Basic radio toggle button group",1,"btn-group"],[1,"mb-1","row","mt-1"],["for"," "],[1,"col-10"],[1,"input-group","show"],["data-id","agent","type","text","autocomplete","off","id","input2","formControlName","fa_nomClie",1,"form-control","dropdown-toggle","searchInput",2,"height","30px",3,"formControl","input","keydown.enter","keydown","blur"],["input1",""],[1,"dropdown-menu",2,"margin-right","30px","margin-top","45px","z-index","300","width","340px","position","absolute","will-change","transform",3,"ngClass"],["class","searchReturnItem name-find",3,"active",4,"ngFor","ngForOf"],[1,"col-4"],["type","text","formControlName","fa_solicitud",1,"form-control","form-control-sm",3,"input","keydown"],["input2",""],["type","text","formControlName","fa_codFact",1,"form-control","form-control-sm"],["formControlName","fa_fecFact","type","text",1,"form-control","form-control-sm"],[1,"mb-1","row"],[1,"col-3"],["type","password","formControlName","fa_codVend",1,"form-control","form-control-sm",3,"input","keydown","keydown.enter"],["input3",""],[4,"ngIf"],["type","text","formControlName","fa_nomVend",1,"form-control","form-control-sm"],["input5",""],[1,"seccion-productos"],["data-id","agent","type","text","autocomplete","off","name","codmerc","placeholder","C\xf3digo",1,"form-control","dropdown-toggle","searchInput","me-2",2,"height","30px",3,"disabled","formControl","ngModel","input","keydown","ngModelChange"],["codigoInput","","input4",""],[1,"dropdown-menu",2,"margin-right","30px","margin-top","45px","z-index","300","width","350px","position","absolute","will-change","transform",3,"ngClass"],["data-id","agent","type","text","autocomplete","off",1,"form-control","dropdown-toggle","searchInput","me-2",2,"height","30px",3,"disabled","formControl","ngModel","input","keydown","ngModelChange"],["descripcionInput","","input5",""],["type","number","placeholder","Cantidad","id","input6",1,"form-control",2,"height","30px",3,"ngModel","formControl","ngModelChange","keydown"],["input6",""],["type","number","id","input7",1,"form-control",2,"height","30px",3,"ngModel","formControl","ngModelChange","keydown","keydown.enter"],["input7",""],[1,"table-responsive",2,"height","370px","overflow-y","auto"],[1,"table","table-sm","table-bordered"],["Tabladetalla",""],[2,"background-color","red"],[2,"width","13%"],[2,"width","37%"],[1,"text-center",2,"width","13%"],[1,"text-center",2,"width","15%"],[1,"text-end",2,"font-size","18px","font-weight","bold"],["colspan","1",1,"text-end",2,"font-size","18px","font-weight","bold"],[1,"row","mt-2"],[1,"col","d-flex","justify-content-end"],["type","submit",1,"btn","btn-primary","btn-xs",3,"disabled"],["tyle","width: 12%",1,"text-end"],[1,"bi","bi-pencil","text-primary",2,"padding","10px",3,"click"],[1,"bi","bi-trash","text-danger",2,"padding","10px",3,"click"],[1,"bi","bi-card-list","text-success",2,"padding","10px",3,"click"],[1,"btn-link",2,"padding","10px"],[1,"bi","bi-file-earmark-pdf","text-danger"],[1,"bi","bi-printer"],[1,"page-link",3,"click"],[1,"searchReturnItem","name-find"],[1,"px-3","cp",2,"color","#222222 !important","font-size","10pt","padding","20px 0px","text-decoration","none !important","cursor","pointer",3,"click"],[1,"far","fa-user-circle","mr-5"],[1,"text-danger"],[1,"text-end",2,"width","15%"],["class","bi bi-pencil text-primary","style","padding: 10px",3,"click",4,"ngIf"],["class","bi bi-trash text-danger","style","padding: 10px",3,"click",4,"ngIf"]],template:function(i,n){if(1&i){const a=t.RV6();t.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h4",5),t.EFF(6," Ventas Interna "),t.k0s()(),t.j41(7,"div",6)(8,"div",1)(9,"div",7)(10,"label",8),t.EFF(11,"No."),t.k0s(),t.nrm(12,"input",9),t.k0s(),t.j41(13,"div",10)(14,"label",8),t.EFF(15,"Cliente"),t.k0s(),t.j41(16,"input",11),t.bIt("ngModelChange",function(r){return n.txtdescripcion=r})("input",function(r){return n.descripcionEntra(r)}),t.k0s()(),t.j41(17,"div",7)(18,"label",8),t.EFF(19,"Fecha"),t.k0s(),t.nrm(20,"input",12),t.k0s(),t.j41(21,"div",13)(22,"button",14),t.bIt("click",function(){return n.limpiaBusqueda()}),t.nrm(23,"i",15),t.k0s()(),t.j41(24,"div",7)(25,"button",16),t.bIt("click",function(){return n.nuevaVentainterna()}),t.EFF(26," Nueva Venta Interna "),t.k0s()()(),t.nrm(27,"br"),t.j41(28,"div",17)(29,"table",18)(30,"thead",19)(31,"tr")(32,"th",20),t.EFF(33,"Numero"),t.k0s(),t.j41(34,"th",21),t.EFF(35,"Nombre"),t.k0s(),t.j41(36,"th",22),t.EFF(37,"Fecha"),t.k0s(),t.j41(38,"th",23),t.EFF(39,"Valor"),t.k0s(),t.j41(40,"th",24),t.EFF(41,"Opciones"),t.k0s()()(),t.j41(42,"tbody"),t.DNE(43,N,17,4,"tr",25),t.k0s()()(),t.nrm(44,"br"),t.j41(45,"nav",26)(46,"ul",27)(47,"li",28)(48,"a",29),t.bIt("click",function(){return n.changePage(1)}),t.j41(49,"span",30),t.EFF(50,"\xab\xab"),t.k0s()()(),t.j41(51,"li",28)(52,"a",31),t.bIt("click",function(){return n.changePage(n.currentPage-1)}),t.j41(53,"span",30),t.EFF(54,"\xab"),t.k0s()()(),t.DNE(55,D,3,3,"li",32),t.j41(56,"li",28)(57,"a",33),t.bIt("click",function(){return n.changePage(n.currentPage+1)}),t.j41(58,"span",30),t.EFF(59,"\xbb"),t.k0s()()(),t.j41(60,"li",28)(61,"a",34),t.bIt("click",function(){return n.changePage(n.totalPages)}),t.j41(62,"span",30),t.EFF(63,"\xbb\xbb"),t.k0s()()()()()()()()()(),t.j41(64,"div",35)(65,"div",36)(66,"div",37)(67,"div",38)(68,"h1",39),t.EFF(69),t.k0s(),t.j41(70,"button",40),t.bIt("click",function(){return n.submitForm()}),t.k0s()(),t.j41(71,"div",41)(72,"form",42),t.bIt("ngSubmit",function(){return n.guardarVentainterna()}),t.j41(73,"div",1)(74,"div",43)(75,"div",44)(76,"div",45)(77,"div",1)(78,"div",46),t.nrm(79,"div",47),t.k0s()(),t.j41(80,"div",48)(81,"div",7)(82,"label",49),t.EFF(83,"Nombre"),t.k0s()(),t.j41(84,"div",50)(85,"div",51)(86,"input",52,53),t.bIt("input",function(r){return n.convertToUpperCase(r)})("keydown.enter",function(r){t.eBV(a);const c=t.sdS(96);return t.Njj(n.moveFocusnomclie(r,c))})("keydown",function(r){return n.handleKeydown(r)})("blur",function(r){return n.onBlur(r)}),t.k0s(),t.j41(88,"div",54),t.DNE(89,A,4,3,"div",55),t.k0s()()()(),t.j41(90,"div",48)(91,"div",7)(92,"label",8),t.EFF(93,"No. Solicitud"),t.k0s()(),t.j41(94,"div",56)(95,"input",57,58),t.bIt("input",function(r){return n.convertToUpperCase(r)})("keydown",function(r){t.eBV(a);const c=t.sdS(117);return t.Njj(n.moveFocus(r,c))}),t.k0s()()()()()(),t.j41(97,"div",56)(98,"div",44)(99,"div",45)(100,"div",48)(101,"div",13)(102,"label",8),t.EFF(103,"No. "),t.k0s()(),t.j41(104,"div",56),t.nrm(105,"input",59),t.k0s(),t.j41(106,"div",7)(107,"label",8),t.EFF(108,"Fecha"),t.k0s()(),t.j41(109,"div",56),t.nrm(110,"input",60),t.k0s()(),t.j41(111,"div",61)(112,"div",56)(113,"label",8),t.EFF(114,"Cod. Vend."),t.k0s()(),t.j41(115,"div",62)(116,"input",63,64),t.bIt("input",function(r){return n.convertToUpperCase(r)})("keydown",function(r){t.eBV(a);const c=t.sdS(131);return t.Njj(n.moveFocus(r,c))})("keydown.enter",function(r){t.eBV(a);const c=t.sdS(131);return t.Njj(n.buscarUsuario(r,c))}),t.k0s(),t.DNE(118,O,3,0,"div",65),t.k0s(),t.j41(119,"div",10),t.nrm(120,"input",66,67),t.k0s()()()()()(),t.nrm(122,"br"),t.j41(123,"div",68)(124,"div",1)(125,"div",7)(126,"label",8),t.EFF(127,"C\xf3digo"),t.k0s(),t.j41(128,"div",51)(129,"input",69,70),t.bIt("input",function(r){return n.convertToUpperCase(r)})("keydown",function(r){return n.handleKeydownInventario(r)})("keydown",function(r){t.eBV(a);const c=t.sdS(121);return t.Njj(n.moveFocuscodmerc(r,c))})("ngModelChange",function(r){return n.codmerc=r}),t.k0s(),t.j41(132,"div",71),t.DNE(133,U,4,3,"div",55),t.k0s()()(),t.j41(134,"div",10)(135,"label",8),t.EFF(136,"Descripci\xf3n"),t.k0s(),t.j41(137,"div",51)(138,"input",72,73),t.bIt("input",function(r){return n.convertToUpperCase(r)})("keydown",function(r){t.eBV(a);const c=t.sdS(147);return t.Njj(n.moveFocusdesc(r,c))})("keydown",function(r){return n.handleKeydownInventariosdesc(r)})("ngModelChange",function(r){return n.descripcionmerc=r}),t.k0s(),t.j41(141,"div",71),t.DNE(142,X,4,3,"div",55),t.k0s()()(),t.j41(143,"div",7)(144,"label",8),t.EFF(145,"Cantidad"),t.k0s(),t.j41(146,"input",74,75),t.bIt("ngModelChange",function(r){return n.cantidadmerc=r})("keydown",function(r){t.eBV(a);const c=t.sdS(152);return t.Njj(n.moveFocusCantidad(r,c))}),t.k0s()(),t.j41(148,"div",7)(149,"label",8),t.EFF(150,"Precio"),t.k0s(),t.j41(151,"input",76,77),t.bIt("ngModelChange",function(r){return n.preciomerc=r})("keydown",function(r){t.eBV(a);const c=t.sdS(131);return t.Njj(n.moveFocus(r,c))})("keydown.enter",function(r){return n.agregaItem(r)}),t.k0s()()(),t.nrm(153,"br"),t.k0s(),t.j41(154,"div",1)(155,"div",2)(156,"div",78)(157,"table",79,80)(159,"thead",19)(160,"tr",81)(161,"th",82),t.EFF(162,"C\xf3digo"),t.k0s(),t.j41(163,"th",83),t.EFF(164,"Descripci\xf3n"),t.k0s(),t.j41(165,"th",84),t.EFF(166,"Cantidad."),t.k0s(),t.j41(167,"th",84),t.EFF(168,"Precio ud"),t.k0s(),t.j41(169,"th",85),t.EFF(170,"Total"),t.k0s(),t.j41(171,"th"),t.EFF(172,"Opciones"),t.k0s()()(),t.j41(173,"tbody"),t.DNE(174,q,15,9,"tr",25),t.k0s(),t.j41(175,"tfoot")(176,"tr"),t.nrm(177,"td")(178,"td")(179,"td"),t.j41(180,"td",86),t.EFF(181," Sub-Total "),t.k0s(),t.j41(182,"td",87),t.EFF(183),t.nI1(184,"currency"),t.k0s()(),t.j41(185,"tr"),t.nrm(186,"td")(187,"td")(188,"td"),t.j41(189,"td",86),t.EFF(190," Itbis "),t.k0s(),t.j41(191,"td",87),t.EFF(192),t.nI1(193,"currency"),t.k0s()(),t.j41(194,"tr"),t.nrm(195,"td")(196,"td")(197,"td"),t.j41(198,"td",86),t.EFF(199," Total Gral "),t.k0s(),t.j41(200,"td",87),t.EFF(201),t.nI1(202,"currency"),t.k0s()()()()()()(),t.j41(203,"div",88)(204,"div",89)(205,"button",90),t.EFF(206," Guardar "),t.k0s()()()()()()()()}if(2&i){let a;t.R7$(16),t.Y8G("ngModel",n.txtdescripcion),t.R7$(27),t.Y8G("ngForOf",n.ventainternaList),t.R7$(4),t.AVh("disabled",1===n.currentPage),t.R7$(4),t.AVh("disabled",1===n.currentPage),t.R7$(4),t.Y8G("ngForOf",n.pages),t.R7$(1),t.AVh("disabled",n.currentPage===n.totalPages),t.R7$(4),t.AVh("disabled",n.currentPage===n.totalPages),t.R7$(9),t.SpI(" ",n.tituloModalVentainterna," "),t.R7$(3),t.Y8G("formGroup",n.formularioVentainterna),t.R7$(14),t.Y8G("formControl",n.buscarNombre),t.R7$(2),t.Y8G("ngClass",t.eq3(42,I,n.resultadoNombre.length>0)),t.R7$(1),t.Y8G("ngForOf",n.resultadoNombre),t.R7$(29),t.Y8G("ngIf",(null==(a=n.formularioVentainterna.get("fa_codVend"))?null:a.touched)&&(null==(a=n.formularioVentainterna.get("fa_codVend"))?null:a.invalid)),t.R7$(11),t.Y8G("disabled",!n.habilitarCampos)("formControl",n.buscarcodmerc)("ngModel",n.codmerc),t.R7$(3),t.Y8G("ngClass",t.eq3(44,I,n.resultadoCodmerc.length>0)),t.R7$(1),t.Y8G("ngForOf",n.resultadoCodmerc),t.R7$(5),t.Y8G("disabled",n.habilitarCampos)("formControl",n.buscardescripcionmerc)("ngModel",n.descripcionmerc),t.R7$(3),t.Y8G("ngClass",t.eq3(46,I,n.resultadodescripcionmerc.length>0)),t.R7$(1),t.Y8G("ngForOf",n.resultadodescripcionmerc),t.R7$(4),t.Y8G("ngModel",n.cantidadmerc)("formControl",n.cantidadform),t.R7$(5),t.Y8G("ngModel",n.preciomerc)("formControl",n.precioform),t.R7$(23),t.Y8G("ngForOf",n.items),t.R7$(9),t.SpI(" ",t.bMT(184,36,n.subTotal)," "),t.R7$(9),t.SpI(" ",t.bMT(193,38,n.totalItbis)," "),t.R7$(9),t.SpI(" ",t.bMT(202,40,n.totalGral)," "),t.R7$(4),t.Y8G("disabled",0===n.items.length)}},dependencies:[p.YU,p.Sq,p.bT,l.qT,l.me,l.Q0,l.BC,l.cb,l.l_,l.j4,l.JD,l.vS,p.oe],styles:[".table-responsive[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{position:sticky;top:0;z-index:2;background-color:#0f1f6a}tfoot[_ngcontent-%COMP%]{position:sticky;bottom:0;background-color:#f1f1f1;z-index:1}.table-responsive[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table-responsive[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:1px;border:1px solid #ccc}.custom-input[_ngcontent-%COMP%]{height:10px;padding:15px;font-size:14px}.custom-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#007bff}.form-check[_ngcontent-%COMP%]{margin-bottom:30px}.custom-space[_ngcontent-%COMP%]{margin-bottom:10px}.form-check-label[_ngcontent-%COMP%]{margin-left:5x}.custom-label[_ngcontent-%COMP%]{color:#000209;font-size:16px;font-weight:700;text-decoration:underline}.card[_ngcontent-%COMP%]{margin:0;padding:0}.name-find[_ngcontent-%COMP%]{margin-bottom:14px;text-decoration:none!important}.active[_ngcontent-%COMP%]{background-color:#007bff;color:#fff}i[_ngcontent-%COMP%]{cursor:pointer}"]})}}return s})()}];let K=(()=>{class s{static{this.\u0275fac=function(i){return new(i||s)}}static{this.\u0275mod=t.$C({type:s})}static{this.\u0275inj=t.G2t({imports:[y.iI.forChild(J),y.iI]})}}return s})(),L=(()=>{class s{static{this.\u0275fac=function(i){return new(i||s)}}static{this.\u0275mod=t.$C({type:s})}static{this.\u0275inj=t.G2t({imports:[p.MD,K,l.X1,l.YN]})}}return s})()}}]);