<div class="container-fluid py-4">
  <div class="card shadow-sm mb-4 border-0 rounded-4">
    <div class="card-header bg-primary text-white rounded-top-4">
      <h5 class="mb-0"><i class="bi bi-receipt-cutoff me-2"></i>Registro de NCF</h5>
    </div>
    <div class="card-body">
      <form class="row g-3" (ngSubmit)="guardarNcf()">
        <div class="col-md-6">
          <label class="form-label fw-semibold">Nombre de la empresa *</label>
          <input type="text" class="form-control" [(ngModel)]="ncf.empresa" name="empresa" required placeholder="Empresa Demo S.A." />
        </div>

        <div class="col-md-6">
          <label class="form-label fw-semibold">Tipo de NCF *</label>
          <select class="form-select" [(ngModel)]="ncf.tipo" name="tipo" required>
            <option value="">Seleccione un tipo</option>
            <option value="B01">B01 - Cr√©dito Fiscal</option>
            <option value="B02">B02 - Consumidor Final</option>
            <option value="B14">B14 - Gubernamental</option>
          </select>
        </div>

        <div class="col-md-6">
          <label class="form-label fw-semibold">Secuencia Desde *</label>
          <input type="text" class="form-control text-center" [(ngModel)]="ncf.secuenciaDesde" name="secuenciaDesde" required maxlength="8" placeholder="00000001" />
        </div>

        <div class="col-md-6">
          <label class="form-label fw-semibold">Secuencia Hasta *</label>
          <input type="text" class="form-control text-center" [(ngModel)]="ncf.secuenciaHasta" name="secuenciaHasta" required maxlength="8" placeholder="00001000" />
        </div>

        <div class="col-md-6">
          <label class="form-label fw-semibold">Cantidad de NCF *</label>
          <input type="number" class="form-control" [(ngModel)]="ncf.cantidad" name="cantidad" required placeholder="1000" />
        </div>

        <div class="col-md-6">
          <label class="form-label fw-semibold">Fecha de Vencimiento *</label>
          <input type="date" class="form-control" [(ngModel)]="ncf.fechaVencimiento" name="fechaVencimiento" required />
        </div>

        <div class="col-md-6">
          <label class="form-label fw-semibold">Alerta NCF (%) *</label>
          <input type="number" class="form-control" [(ngModel)]="ncf.alerta" name="alerta" required placeholder="20" />
          <div class="form-text">Porcentaje de uso para activar la alerta</div>
        </div>

        <div class="col-md-6">
          <label class="form-label fw-semibold">Estado *</label>
          <select class="form-select" [(ngModel)]="ncf.estado" name="estado" required>
            <option value="Activo">Activo</option>
            <option value="Inactivo">Inactivo</option>
          </select>
        </div>

        <div class="col-12 d-flex justify-content-end gap-2 mt-3">
          <button type="submit" class="btn btn-primary px-4">
            <i class="bi bi-save me-1"></i> Guardar NCF
          </button>
          <button type="button" class="btn btn-outline-secondary px-4" (click)="limpiarFormulario()">
            <i class="bi bi-arrow-counterclockwise me-1"></i> Limpiar
          </button>
        </div>
      </form>
    </div>
  </div>
  <!-- Tabla -->
  <div class="card shadow-sm border-0 rounded-4">
    <div class="card-header bg-primary text-white rounded-top-4">
      <h5 class="mb-0"><i class="bi bi-list-check me-2"></i>NCF Registrados</h5>
    </div>
    <div class="card-body p-0">
      <div class="table-responsive">
        <table class="table table-hover align-middle mb-0">
          <thead class="table-primary">
            <tr>
              <th>EMPRESA</th>
              <th>TIPO NCF</th>
              <th>SECUENCIA</th>
              <th>CANTIDAD</th>
              <th>FECHA VENC.</th>
              <th>ALERTA</th>
              <th>ESTADO</th>
              <th class="text-center">ACCIONES</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let item of listaNcf">
              <td>{{ item.empresa }}</td>
              <td>{{ item.tipo }}</td>
              <td>{{ item.secuenciaDesde }} - {{ item.secuenciaHasta }}</td>
              <td>{{ item.cantidad }}</td>
              <td>{{ item.fechaVencimiento | date:'dd/MM/yyyy' }}</td>
              <td>{{ item.alerta }}%</td>
              <td>
                <span class="badge" [ngClass]="item.estado === 'Activo' ? 'bg-success' : 'bg-danger'">
                  {{ item.estado }}
                </span>
              </td>
              <td class="text-center">
                <button class="btn btn-sm btn-outline-primary me-1" (click)="editar(item)">
                  <i class="bi bi-pencil"></i>
                </button>
                <button class="btn btn-sm btn-outline-danger" (click)="eliminar(item)">
                  <i class="bi bi-trash"></i>
                </button>
              </td>
            </tr>
            <tr *ngIf="listaNcf.length === 0">
              <td colspan="8" class="text-center text-muted py-3">No hay NCF registrados</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>
