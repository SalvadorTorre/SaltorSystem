"use strict";(self.webpackChunkSaltorSystem=self.webpackChunkSaltorSystem||[]).push([[558],{4558:(C,m,c)=>{c.r(m),c.d(m,{ModuloRnc:()=>E});var o=c(9417),u=c(177),b=c(8871),f=c(8032),s=c.n(f),t=c(8699),h=c(8747);function p(i,l){if(1&i){const e=t.RV6();t.j41(0,"button",49),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.limpiarFiltro())}),t.nrm(1,"i",50),t.k0s()}}const g=function(i,l){return{"bg-success":i,"bg-danger":l}};function R(i,l){if(1&i){const e=t.RV6();t.j41(0,"tr")(1,"td"),t.EFF(2),t.k0s(),t.j41(3,"td"),t.EFF(4),t.k0s(),t.j41(5,"td")(6,"span",51),t.EFF(7),t.k0s()(),t.j41(8,"td",22)(9,"button",52),t.bIt("click",function(){const a=t.eBV(e).$implicit,d=t.XpG();return t.Njj(d.editar(a))}),t.nrm(10,"i",53),t.k0s()()()}if(2&i){const e=l.$implicit;t.R7$(2),t.JRh(e.rnc),t.R7$(2),t.JRh(e.rason),t.R7$(2),t.Y8G("ngClass",t.l_i(4,g,"ACTIVO"===e.status,"ACTIVO"!==e.status)),t.R7$(1),t.SpI(" ",e.status||"N/A"," ")}}function _(i,l){1&i&&(t.j41(0,"tr")(1,"td",54),t.EFF(2," No hay registros disponibles. "),t.k0s()())}function k(i,l){if(1&i&&(t.j41(0,"option",55),t.EFF(1),t.k0s()),2&i){const e=l.$implicit;t.Y8G("value",e),t.R7$(1),t.JRh(e)}}function F(i,l){if(1&i&&(t.j41(0,"span",56),t.EFF(1),t.k0s()),2&i){const e=t.XpG();t.R7$(1),t.SpI(" Total: ",e.totalItems," registros ")}}function v(i,l){if(1&i){const e=t.RV6();t.j41(0,"nav",57)(1,"ul",58)(2,"li",59)(3,"button",60),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.cambiarPagina(n.page-1))}),t.j41(4,"span",61),t.EFF(5,"\xab"),t.k0s()()(),t.j41(6,"li",62)(7,"span",63),t.EFF(8),t.k0s()(),t.j41(9,"li",59)(10,"button",64),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.cambiarPagina(n.page+1))}),t.j41(11,"span",61),t.EFF(12,"\xbb"),t.k0s()()()()()}if(2&i){const e=t.XpG();t.R7$(2),t.AVh("disabled",1===e.page),t.R7$(6),t.Lme("P\xe1gina ",e.page," de ",e.totalPages,""),t.R7$(1),t.AVh("disabled",e.page===e.totalPages)}}function j(i,l){1&i&&(t.j41(0,"div",65),t.EFF(1," La raz\xf3n social es requerida. "),t.k0s())}const I=[{path:"",component:(()=>{class i{constructor(e,r){this.fb=e,this.servicioRnc=r,this.rncList=[],this.tituloModalrnc="",this.modoedicionRnc=!1,this.filtro="",this.isLoadingImport=!1,this.page=1,this.limit=20,this.totalItems=0,this.limits=[10,20,50,100],this.crearFormulario()}ngOnInit(){this.obtenerRnc()}crearFormulario(){this.formulariornc=this.fb.group({id:[""],rnc:["",o.k0.required],rason:["",o.k0.required],status:[""]})}obtenerRnc(){this.servicioRnc.buscarTodosRnc(this.page,this.limit,this.filtro).subscribe(e=>{e&&e.data&&e.data.data?(this.rncList=e.data.data,this.totalItems=e.data.pagination?.total||0):(this.rncList=[],this.totalItems=0)},e=>{console.error(e)})}filtrar(){this.page=1,this.obtenerRnc()}limpiarFiltro(){this.filtro="",this.filtrar()}cambiarPagina(e){e>=1&&(0===this.totalItems||e<=this.totalPages)&&(this.page=e,this.obtenerRnc())}cambiarLimite(){this.page=1,this.obtenerRnc()}get totalPages(){return Math.ceil(this.totalItems/this.limit)}importarDesdeDgii(){s().fire({title:"\xbfEst\xe1s seguro?",text:"Esta acci\xf3n borrar\xe1 todos los datos existentes y los reemplazar\xe1 con la nueva importaci\xf3n. \xbfDeseas continuar?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"S\xed, importar",cancelButtonText:"Cancelar"}).then(e=>{e.isConfirmed&&(s().fire({title:"Importando datos...",html:"Por favor espere, esto puede tardar unos momentos.",allowOutsideClick:!1,didOpen:()=>{s().showLoading()}}),this.servicioRnc.importarDgii().subscribe(()=>{s().close(),this.obtenerRnc(),s().fire("\xc9xito","Importaci\xf3n completada exitosamente","success")},r=>{s().close(),console.error(r),s().fire("Error","Hubo un error al importar los datos","error")}))})}nuevo(){this.modoedicionRnc=!1,this.tituloModalrnc="Nuevo RNC",this.formulariornc.reset(),this.formulariornc.get("rnc")?.enable(),$("#modalrnc").modal("show")}editar(e){this.modoedicionRnc=!0,this.tituloModalrnc="Editar RNC",this.selectedRncId=e.id,this.formulariornc.patchValue({id:e.id,rnc:e.rnc,rason:e.rason,status:e.status}),this.formulariornc.get("rnc")?.disable(),$("#modalrnc").modal("show")}guardar(){if(this.formulariornc.valid){const e=this.formulariornc.getRawValue();this.modoedicionRnc?this.servicioRnc.editarRnc(this.selectedRncId,{rason:e.rason}).subscribe(()=>{s().fire("\xc9xito","RNC actualizado correctamente","success"),$("#modalrnc").modal("hide"),this.obtenerRnc()},n=>{s().fire("Error","No se pudo actualizar el RNC","error")}):this.servicioRnc.guardaRnc({rnc:e.rnc,rason:e.rason,status:"ACTIVO"}).subscribe(()=>{s().fire("\xc9xito","RNC creado correctamente","success"),$("#modalrnc").modal("hide"),this.obtenerRnc()},n=>{s().fire("Error","No se pudo crear el RNC","error")})}}cerrarModal(){$("#modalrnc").modal("hide"),this.formulariornc.reset()}static{this.\u0275fac=function(r){return new(r||i)(t.rXU(o.ok),t.rXU(h.E))}}static{this.\u0275cmp=t.VBU({type:i,selectors:[["Rnc"]],decls:68,vars:12,consts:[[1,"card","shadow-sm","h-100"],[1,"card-header","bg-primary","text-white","d-flex","justify-content-between","align-items-center"],[1,"h3","mb-0"],[1,"bi","bi-file-text","me-2"],[1,"card-body"],[1,"d-flex","justify-content-between","mb-3"],[1,"flex-grow-1","me-3"],[1,"input-group"],[1,"input-group-text","bg-white","border-end-0"],[1,"bi","bi-search","text-muted"],["type","text","placeholder","Buscar por RNC o Raz\xf3n Social (Enter)...",1,"form-control","border-start-0","ps-0",3,"ngModel","ngModelChange","keydown.enter"],["class","btn btn-outline-secondary border-start-0","type","button","title","Limpiar b\xfasqueda",3,"click",4,"ngIf"],["type","button",1,"btn","btn-outline-secondary","border-start-0",3,"click"],[1,"bi","bi-arrow-right"],[1,"d-flex","gap-2"],[1,"btn","btn-primary",3,"click"],[1,"bi","bi-plus-lg","me-2"],[1,"btn","btn-warning","text-white",3,"click"],[1,"bi","bi-cloud-download","me-2"],[1,"table-responsive","mb-3"],[1,"table","table-hover","table-striped","align-middle"],[1,"table-light"],[1,"text-end"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"d-flex","justify-content-between","align-items-center"],[1,"d-flex","align-items-center"],["for","pageSize",1,"me-2","text-muted"],["id","pageSize",1,"form-select","form-select-sm",2,"width","auto",3,"ngModel","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],["class","ms-3 text-muted",4,"ngIf"],["aria-label","Page navigation",4,"ngIf"],["id","modalrnc","tabindex","-1","aria-labelledby","modalrncLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header","bg-primary","text-white"],["id","modalrncLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close","btn-close-white"],[1,"modal-body"],[3,"formGroup"],[1,"mb-3"],["for","rnc",1,"form-label"],["type","text","id","rnc","formControlName","rnc",1,"form-control"],["for","rason",1,"form-label"],["type","text","id","rason","formControlName","rason",1,"form-control"],["class","text-danger small mt-1",4,"ngIf"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"],["type","button",1,"btn","btn-primary",3,"disabled","click"],["type","button","title","Limpiar b\xfasqueda",1,"btn","btn-outline-secondary","border-start-0",3,"click"],[1,"bi","bi-x-lg"],[1,"badge",3,"ngClass"],["title","Editar",1,"btn","btn-sm","btn-outline-primary",3,"click"],[1,"bi","bi-pencil"],["colspan","3",1,"text-center","py-4","text-muted"],[3,"value"],[1,"ms-3","text-muted"],["aria-label","Page navigation"],[1,"pagination","pagination-sm","mb-0"],[1,"page-item"],["aria-label","Previous",1,"page-link",3,"click"],["aria-hidden","true"],[1,"page-item","disabled"],[1,"page-link"],["aria-label","Next",1,"page-link",3,"click"],[1,"text-danger","small","mt-1"]],template:function(r,n){if(1&r&&(t.j41(0,"div",0)(1,"div",1)(2,"h1",2),t.nrm(3,"i",3),t.EFF(4,"Gesti\xf3n de RNC"),t.k0s()(),t.j41(5,"div",4)(6,"div",5)(7,"div",6)(8,"div",7)(9,"span",8),t.nrm(10,"i",9),t.k0s(),t.j41(11,"input",10),t.bIt("ngModelChange",function(d){return n.filtro=d})("keydown.enter",function(){return n.filtrar()}),t.k0s(),t.DNE(12,p,2,0,"button",11),t.j41(13,"button",12),t.bIt("click",function(){return n.filtrar()}),t.nrm(14,"i",13),t.k0s()()(),t.j41(15,"div",14)(16,"button",15),t.bIt("click",function(){return n.nuevo()}),t.nrm(17,"i",16),t.EFF(18,"Nuevo "),t.k0s(),t.j41(19,"button",17),t.bIt("click",function(){return n.importarDesdeDgii()}),t.nrm(20,"i",18),t.EFF(21,"Actualizar desde DGII "),t.k0s()()(),t.j41(22,"div",19)(23,"table",20)(24,"thead",21)(25,"tr")(26,"th"),t.EFF(27,"RNC"),t.k0s(),t.j41(28,"th"),t.EFF(29,"Raz\xf3n Social"),t.k0s(),t.j41(30,"th"),t.EFF(31,"Estado"),t.k0s(),t.j41(32,"th",22),t.EFF(33,"Acciones"),t.k0s()()(),t.j41(34,"tbody"),t.DNE(35,R,11,7,"tr",23),t.DNE(36,_,3,0,"tr",24),t.k0s()()(),t.j41(37,"div",25)(38,"div",26)(39,"label",27),t.EFF(40,"Mostrar:"),t.k0s(),t.j41(41,"select",28),t.bIt("ngModelChange",function(d){return n.limit=d})("change",function(){return n.cambiarLimite()}),t.DNE(42,k,2,2,"option",29),t.k0s(),t.DNE(43,F,2,1,"span",30),t.k0s(),t.DNE(44,v,13,6,"nav",31),t.k0s()()(),t.j41(45,"div",32)(46,"div",33)(47,"div",34)(48,"div",35)(49,"h5",36),t.EFF(50),t.k0s(),t.nrm(51,"button",37),t.k0s(),t.j41(52,"div",38)(53,"form",39)(54,"div",40)(55,"label",41),t.EFF(56,"RNC"),t.k0s(),t.nrm(57,"input",42),t.k0s(),t.j41(58,"div",40)(59,"label",43),t.EFF(60,"Raz\xf3n Social"),t.k0s(),t.nrm(61,"input",44),t.DNE(62,j,2,0,"div",45),t.k0s()()(),t.j41(63,"div",46)(64,"button",47),t.EFF(65,"Cancelar"),t.k0s(),t.j41(66,"button",48),t.bIt("click",function(){return n.guardar()}),t.EFF(67,"Guardar"),t.k0s()()()()()),2&r){let a;t.R7$(11),t.Y8G("ngModel",n.filtro),t.R7$(1),t.Y8G("ngIf",n.filtro),t.R7$(23),t.Y8G("ngForOf",n.rncList),t.R7$(1),t.Y8G("ngIf",0===n.rncList.length),t.R7$(5),t.Y8G("ngModel",n.limit),t.R7$(1),t.Y8G("ngForOf",n.limits),t.R7$(1),t.Y8G("ngIf",n.totalItems>0),t.R7$(1),t.Y8G("ngIf",n.totalPages>1),t.R7$(6),t.JRh(n.tituloModalrnc),t.R7$(3),t.Y8G("formGroup",n.formulariornc),t.R7$(9),t.Y8G("ngIf",(null==(a=n.formulariornc.get("rason"))?null:a.invalid)&&((null==(a=n.formulariornc.get("rason"))?null:a.dirty)||(null==(a=n.formulariornc.get("rason"))?null:a.touched))),t.R7$(4),t.Y8G("disabled",n.formulariornc.invalid)}},dependencies:[u.YU,u.Sq,u.bT,o.qT,o.xH,o.y7,o.me,o.wz,o.BC,o.cb,o.j4,o.JD,o.vS]})}}return i})()}];let y=(()=>{class i{static{this.\u0275fac=function(r){return new(r||i)}}static{this.\u0275mod=t.$C({type:i})}static{this.\u0275inj=t.G2t({imports:[b.iI.forChild(I),b.iI]})}}return i})(),E=(()=>{class i{static{this.\u0275fac=function(r){return new(r||i)}}static{this.\u0275mod=t.$C({type:i})}static{this.\u0275inj=t.G2t({imports:[u.MD,y,o.X1,o.YN]})}}return i})()}}]);