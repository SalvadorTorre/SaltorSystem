"use strict";(self.webpackChunkSaltorSystem=self.webpackChunkSaltorSystem||[]).push([[343],{4343:(S,u,a)=>{a.r(u),a.d(u,{ModuloInventario:()=>y});var p=a(177),b=a(8871),g=a(4412),v=a(152),h=a(3294),f=a(5558),F=a(8032),d=a.n(F),t=a(8699),s=a(9417),k=a(9743),j=a(2891);function I(r,c){if(1&r){const i=t.RV6();t.j41(0,"tr")(1,"td",110),t.EFF(2),t.k0s(),t.j41(3,"td",111),t.EFF(4),t.k0s(),t.j41(5,"td",112),t.EFF(6),t.k0s(),t.j41(7,"td",112),t.EFF(8),t.k0s(),t.j41(9,"td",20)(10,"div",113)(11,"button",114),t.bIt("click",function(){const o=t.eBV(i).$implicit,l=t.XpG();return t.Njj(l.editarProducto(o))}),t.nrm(12,"i",115),t.k0s(),t.j41(13,"button",116),t.bIt("click",function(){const o=t.eBV(i).$implicit,l=t.XpG();return t.Njj(l.eliminarProducto(o.in_codmerc))}),t.nrm(14,"i",117),t.k0s(),t.j41(15,"button",118),t.bIt("click",function(){const o=t.eBV(i).$implicit,l=t.XpG();return t.Njj(l.consultarProducto(o))}),t.nrm(16,"i",119),t.k0s()(),t.j41(17,"div",120)(18,"span",121),t.EFF(19),t.k0s(),t.j41(20,"span",122),t.EFF(21),t.k0s()()()()}if(2&r){const i=c.$implicit;t.R7$(2),t.JRh(i.in_codmerc),t.R7$(2),t.JRh(i.in_desmerc),t.R7$(2),t.JRh(i.in_canmerc),t.R7$(2),t.JRh(i.in_premerc),t.R7$(11),t.SpI("Existencia: ",i.in_canmerc,""),t.R7$(2),t.SpI("Precio: ",i.in_premerc,"")}}function _(r,c){if(1&r){const i=t.RV6();t.j41(0,"li",123)(1,"a",124),t.bIt("click",function(){const o=t.eBV(i).$implicit,l=t.XpG();return t.Njj(l.changePage(o))}),t.EFF(2),t.k0s()()}if(2&r){const i=c.$implicit,n=t.XpG();t.AVh("active",n.currentPage===i)("d-inline-block",i===n.currentPage||i===n.currentPage-1||i===n.currentPage+1),t.R7$(2),t.JRh(i)}}function E(r,c){if(1&r&&(t.j41(0,"option",125),t.EFF(1),t.k0s()),2&r){const i=c.$implicit;t.Y8G("value",i.Codgrupo),t.R7$(1),t.SpI(" ",i.Descgrupo," ")}}const P=[{path:"",component:(()=>{class r{constructor(i,n,e){this.fb=i,this.servicioInventario=n,this.servicioGrupmerc=e,this.habilitarBusqueda=!1,this.invenarioList=[],this.grupomercList=[],this.maxChars=30,this.remainingChars=this.maxChars,this.totalItems=0,this.pageSize=8,this.currentPage=1,this.maxPagesToShow=5,this.codigo="",this.descripcion="",this.codigoInput="",this.codigoSubject=new g.t(""),this.descripcionSubject=new g.t(""),this.crearFormularioInventario(),this.codigoSubject.pipe((0,v.B)(500),(0,h.F)(),(0,f.n)(o=>(this.codigo=o,this.servicioInventario.obtenerTodosInventario(this.currentPage,this.pageSize,this.codigo,this.descripcion)))).subscribe(o=>{this.invenarioList=o.data,this.totalItems=o.pagination.total,this.currentPage=o.pagination.page}),this.descripcionSubject.pipe((0,v.B)(500),(0,h.F)(),(0,f.n)(o=>(console.log("descripcion",o),this.descripcion=o,this.servicioInventario.obtenerTodosInventario(this.currentPage,this.pageSize,this.codigo,this.descripcion)))).subscribe(o=>{this.invenarioList=o.data,this.totalItems=o.pagination.total,this.currentPage=o.pagination.page})}ngOnInit(){this.obtenerTodosInventario(1),this.obtenerTodosGrupoMercancias(),this.formularioInventario.get("in_desmerc").valueChanges.subscribe(i=>{this.updateCharCount()})}onCodigoInput(i){this.codigoSubject.next(i.target.value.toUpperCase())}clearInput(){this.codigoInput=""}onDescripcionInput(i){this.descripcionSubject.next(i.target.value.toUpperCase())}updateCharCount(){const i=this.formularioInventario.get("in_desmerc").value.length;this.remainingChars=this.maxChars-i}crearFormularioInventario(){this.formularioInventario=this.fb.group({in_codmerc:[""],in_desmerc:[""],in_grumerc:[""],in_tipoproduct:[""],in_canmerc:[""],in_caninve:[""],in_fecinve:[""],in_eximini:[""],in_cosmerc:[""],in_premerc:[""],in_precmin:[""],in_costpro:[""],in_ucosto:[""],in_porgana:[""],in_peso:[""],in_longitud:[""],in_unidad:[""],in_medida:[""],in_fecmodif:[""],in_amacen:[""],in_imagen:[""],in_status:[""],in_minvent:[""]})}habilitarBuscador(){this.habilitarBusqueda=!1}nuevoProducto(){this.tituloModalProducto="Agregar Producto",$("#modalProducto").modal("show")}editarProducto(i){console.log(i),this.tituloModalProducto="Editar Producto",this.formularioInventario.patchValue(i),$("#modalProducto").modal("show")}consultarProducto(i){this.tituloModalProducto="Consulta Inventario",this.formularioInventario.patchValue(i),$("#modalproducto").modal("show")}onSubmitInventario(){this.formularioInventario.valid?(console.log(this.formularioInventario.value),this.servicioInventario.guardarInventario(this.formularioInventario.value).subscribe(i=>{d().fire({title:"Excelente!",text:"Producto guardado correctamente.",icon:"success",timer:3e3,showConfirmButton:!1}),this.obtenerTodosInventario(1),this.formularioInventario.reset(),$("#modalProducto").modal("hide"),this.crearFormularioInventario()})):alert("Formulario invalido")}obtenerTodosInventario(i){this.servicioInventario.obtenerTodosInventario(i,this.pageSize).subscribe(n=>{this.invenarioList=n.data.rows,this.totalItems=n.data.pagination.total,this.currentPage=i})}obtenerTodosGrupoMercancias(){this.servicioGrupmerc.obtenerTodosGrupoMercancias().subscribe(i=>{this.grupomercList=i.data})}eliminarProducto(i){d().fire({title:"\xbfEst\xe1 seguro de eliminar este producto?",text:"\xa1No podr\xe1 revertir esto!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si, eliminar!"}).then(n=>{n.isConfirmed&&this.servicioInventario.borrarDeInventario(i).subscribe(e=>{d().fire({title:"Excelente!",text:"Producto eliminado correctamente.",icon:"success",timer:3e3,showConfirmButton:!1}),this.obtenerTodosInventario(this.currentPage)})})}changePage(i){this.currentPage=i;const n=this.codigoSubject.getValue(),e=this.descripcionSubject.getValue();this.servicioInventario.obtenerTodosInventario(this.currentPage,this.pageSize,n,e).subscribe(o=>{this.invenarioList=o.data,this.totalItems=o.pagination.total,this.currentPage=i})}get totalPages(){return Math.ceil(this.totalItems/this.pageSize)}get pages(){const i=this.totalPages,n=this.currentPage,e=this.maxPagesToShow;if(i<=e)return Array.from({length:i},(x,m)=>m+1);const o=Math.max(1,n-Math.floor(e/2)),l=Math.min(i,o+e-1);return Array.from({length:l-o+1},(x,m)=>o+m)}static{this.\u0275fac=function(n){return new(n||r)(t.rXU(s.ok),t.rXU(k.M),t.rXU(j.e))}}static{this.\u0275cmp=t.VBU({type:r,selectors:[["Inventario"]],decls:224,vars:16,consts:[[1,"card","shadow-sm","h-100"],[1,"card-header","bg-primary","text-white"],[1,"mb-0"],[1,"card-body"],[1,"row","g-3","mb-4"],[1,"col-12","col-sm-6","col-md-4","col-lg-3"],["for","buscarCodigo",1,"form-label"],[1,"input-group"],[1,"input-group-text"],[1,"bi","bi-search"],["type","text","id","buscarCodigo","placeholder","Digite c\xf3digo",1,"form-control","uppercase",3,"input"],[1,"col-12","col-sm-6","col-md-5","col-lg-4"],["for","buscarDescripcion",1,"form-label"],["type","text","id","buscarDescripcion","placeholder","Digite descripci\xf3n...",1,"form-control","uppercase",3,"input"],[1,"col-12","col-sm-6","col-md-3","col-lg-3","d-flex","align-items-end"],[1,"btn","btn-primary","w-100",3,"click"],[1,"bi","bi-plus-circle","me-2"],[1,"table-responsive","mt-3"],[1,"table","table-bordered","table-hover","table-striped","table-sm"],[1,"table-dark"],[1,"text-center"],[1,"text-center","d-none","d-md-table-cell"],[4,"ngFor","ngForOf"],["aria-label","Page navigation",1,"mt-4"],[1,"pagination","pagination-sm","flex-wrap","justify-content-center"],[1,"page-item"],["aria-label","First","title","Primera p\xe1gina",1,"page-link",3,"click"],["aria-hidden","true"],["aria-label","Previous","title","P\xe1gina anterior",1,"page-link",3,"click"],["class","page-item d-none d-sm-inline-block",3,"active","d-inline-block",4,"ngFor","ngForOf"],[1,"page-item","d-sm-none"],[1,"page-link"],["aria-label","Next","title","P\xe1gina siguiente",1,"page-link",3,"click"],["aria-label","Last","title","\xdaltima p\xe1gina",1,"page-link",3,"click"],["id","modalProducto","tabindex","-1","aria-labelledby","modalProductoLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-ancho","modal-fullscreen-lg-down"],[1,"modal-content"],[1,"modal-header","bg-primary","text-white"],["id","modalProductoLabel",1,"modal-title","fs-5"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close","btn-close-white"],[1,"modal-body"],[3,"formGroup","ngSubmit"],[1,"card","shadow-sm","mb-3"],[1,"card-header","bg-light"],[1,"row","g-3"],[1,"col-3","col-md-3"],["for","codigo",1,"form-label"],["type","text","id","codigo","formControlName","in_codmerc",1,"form-control"],[1,"col-8"],["for","descripcion",1,"form-label"],["type","text","id","descripcion","formControlName","in_desmerc","maxlength","30",1,"form-control",3,"input"],[1,"form-text","text-danger"],[1,"col-1","col-md-1"],["for","status",1,"form-label"],["id","status","formControlName","in_status",1,"form-select"],["value","A"],["value","I"],["value","E"],["value","X"],[1,"col-2","col-md-2"],["for","unidad",1,"form-label"],["type","text","id","unidad","formControlName","in_unidad",1,"form-control"],["for","peso",1,"form-label"],["type","text","id","peso","formControlName","in_peso",1,"form-control"],["for","longitud",1,"form-label"],["type","text","id","longitud","formControlName","in_longitud",1,"form-control"],["for","grupo",1,"form-label"],["id","grupo","formControlName","in_grumerc",1,"form-select"],["selected","","disabled","",3,"value"],[3,"value",4,"ngFor","ngForOf"],[1,"col-6","col-md-3"],["for","tipo",1,"form-label"],["id","tipo","formControlName","in_tipoproduct",1,"form-select"],["value","F"],["value","H"],[1,"text-danger","mb-3"],[1,"col-3","col-sm-3"],["for","compra",1,"form-label"],[1,"bi","bi-currency-dollar"],["type","text","id","compra","formControlName","in_cosmerc",1,"form-control"],["for","compraAnterior",1,"form-label"],["type","text","id","compraAnterior","formControlName","in_ucosto",1,"form-control"],["for","promedio",1,"form-label"],["type","text","id","promedio","formControlName","in_costpro",1,"form-control"],["for","porcentajeVentas",1,"form-label"],["type","text","id","porcentajeVentas","formControlName","in_porgana",1,"form-control"],[1,"text-danger","mb-3","mt-4"],[1,"col-12","col-sm-4"],["for","venta",1,"form-label"],["type","text","id","venta","formControlName","in_premerc",1,"form-control"],["for","minimo",1,"form-label"],["type","text","id","minimo","formControlName","in_precmin",1,"form-control"],["for","actualizada",1,"form-label"],["type","date","id","actualizada","formControlName","in_fecmodif",1,"form-control"],[1,"col-12","col-lg-6"],["for","enAlmacen",1,"form-label"],["type","number","id","enAlmacen","formControlName","in_canmerc",1,"form-control"],["for","minima",1,"form-label"],["type","number","id","minima","formControlName","in_eximini",1,"form-control"],["for","minimaVenta",1,"form-label"],["type","number","id","minimaVenta","formControlName","in_minvent",1,"form-control"],[1,"col-12","col-sm-6"],["for","fecha",1,"form-label"],["type","date","id","fecha","formControlName","in_fecinve",1,"form-control"],["for","cantidad",1,"form-label"],["type","number","id","cantidad","formControlName","in_caninve",1,"form-control"],[1,"d-flex","justify-content-end","mt-4"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary","me-2"],["type","submit",1,"btn","btn-success"],[1,"bi","bi-save","me-2"],[1,"text-center","align-middle"],[1,"align-middle"],[1,"text-center","align-middle","d-none","d-md-table-cell"],["role","group",1,"btn-group"],["type","button","title","Editar",1,"btn","btn-sm","btn-outline-primary",3,"click"],[1,"bi","bi-pencil"],["type","button","title","Eliminar",1,"btn","btn-sm","btn-outline-danger",3,"click"],[1,"bi","bi-trash"],["type","button","title","Consultar",1,"btn","btn-sm","btn-outline-success",3,"click"],[1,"bi","bi-card-list"],[1,"d-md-none","mt-2","small"],[1,"badge","bg-info","me-2"],[1,"badge","bg-secondary"],[1,"page-item","d-none","d-sm-inline-block"],[1,"page-link",3,"click"],[3,"value"]],template:function(n,e){1&n&&(t.j41(0,"div",0)(1,"div",1)(2,"h4",2),t.EFF(3,"M\xf3dulo Producto"),t.k0s()(),t.j41(4,"div",3)(5,"div",4)(6,"div",5)(7,"label",6),t.EFF(8,"Buscar C\xf3digo"),t.k0s(),t.j41(9,"div",7)(10,"span",8),t.nrm(11,"i",9),t.k0s(),t.j41(12,"input",10),t.bIt("input",function(l){return e.onCodigoInput(l)}),t.k0s()()(),t.j41(13,"div",11)(14,"label",12),t.EFF(15,"Buscar Descripci\xf3n"),t.k0s(),t.j41(16,"div",7)(17,"span",8),t.nrm(18,"i",9),t.k0s(),t.j41(19,"input",13),t.bIt("input",function(l){return e.onDescripcionInput(l)}),t.k0s()()(),t.j41(20,"div",14)(21,"button",15),t.bIt("click",function(){return e.nuevoProducto()}),t.nrm(22,"i",16),t.EFF(23,"Nuevo producto "),t.k0s()()(),t.j41(24,"div",17)(25,"table",18)(26,"thead",19)(27,"tr")(28,"th",20),t.EFF(29,"C\xf3digo"),t.k0s(),t.j41(30,"th"),t.EFF(31,"Descripci\xf3n"),t.k0s(),t.j41(32,"th",21),t.EFF(33,"Existencia"),t.k0s(),t.j41(34,"th",21),t.EFF(35,"Precio"),t.k0s(),t.j41(36,"th",20),t.EFF(37,"Acciones"),t.k0s()()(),t.j41(38,"tbody"),t.DNE(39,I,22,6,"tr",22),t.k0s()()(),t.j41(40,"nav",23)(41,"ul",24)(42,"li",25)(43,"a",26),t.bIt("click",function(){return e.changePage(1)}),t.j41(44,"span",27),t.EFF(45,"\xab\xab"),t.k0s()()(),t.j41(46,"li",25)(47,"a",28),t.bIt("click",function(){return e.changePage(e.currentPage-1)}),t.j41(48,"span",27),t.EFF(49,"\xab"),t.k0s()()(),t.DNE(50,_,3,5,"li",29),t.j41(51,"li",30)(52,"span",31),t.EFF(53),t.k0s()(),t.j41(54,"li",25)(55,"a",32),t.bIt("click",function(){return e.changePage(e.currentPage+1)}),t.j41(56,"span",27),t.EFF(57,"\xbb"),t.k0s()()(),t.j41(58,"li",25)(59,"a",33),t.bIt("click",function(){return e.changePage(e.totalPages)}),t.j41(60,"span",27),t.EFF(61,"\xbb\xbb"),t.k0s()()()()()()(),t.j41(62,"div",34)(63,"div",35)(64,"div",36)(65,"div",37)(66,"h1",38),t.EFF(67),t.k0s(),t.nrm(68,"button",39),t.k0s(),t.j41(69,"div",40)(70,"form",41),t.bIt("ngSubmit",function(){return e.onSubmitInventario()}),t.j41(71,"div",42)(72,"div",43)(73,"h5",2),t.EFF(74,"Datos del producto"),t.k0s()(),t.j41(75,"div",3)(76,"div",44)(77,"div",45)(78,"label",46),t.EFF(79,"C\xf3digo"),t.k0s(),t.nrm(80,"input",47),t.k0s(),t.j41(81,"div",48)(82,"label",49),t.EFF(83,"Descripci\xf3n"),t.k0s(),t.j41(84,"input",50),t.bIt("input",function(){return e.updateCharCount()}),t.k0s(),t.j41(85,"small",51),t.EFF(86),t.k0s()(),t.j41(87,"div",52)(88,"label",53),t.EFF(89,"Status"),t.k0s(),t.j41(90,"select",54)(91,"option",55),t.EFF(92,"Activo"),t.k0s(),t.j41(93,"option",56),t.EFF(94,"Inactivo"),t.k0s(),t.j41(95,"option",57),t.EFF(96,"Escaso"),t.k0s(),t.j41(97,"option",58),t.EFF(98,"Autorizado"),t.k0s()()(),t.j41(99,"div",59)(100,"label",60),t.EFF(101,"Unidad"),t.k0s(),t.nrm(102,"input",61),t.k0s(),t.j41(103,"div",59)(104,"label",62),t.EFF(105,"Peso"),t.k0s(),t.nrm(106,"input",63),t.k0s(),t.j41(107,"div",59)(108,"label",64),t.EFF(109,"Longitud"),t.k0s(),t.nrm(110,"input",65),t.k0s(),t.j41(111,"div",45)(112,"label",66),t.EFF(113,"Grupo"),t.k0s(),t.j41(114,"select",67)(115,"option",68),t.EFF(116," Seleccione un grupo "),t.k0s(),t.DNE(117,E,2,2,"option",69),t.k0s()(),t.j41(118,"div",70)(119,"label",71),t.EFF(120,"Tipo"),t.k0s(),t.j41(121,"select",72)(122,"option",73),t.EFF(123,"Forja"),t.k0s(),t.j41(124,"option",74),t.EFF(125,"Hierro"),t.k0s()()()()()(),t.j41(126,"div",42)(127,"div",43)(128,"h5",2),t.EFF(129,"Costo y Precio"),t.k0s()(),t.j41(130,"div",3)(131,"h6",75),t.EFF(132,"Costo"),t.k0s(),t.j41(133,"div",44)(134,"div",76)(135,"label",77),t.EFF(136,"Compra"),t.k0s(),t.j41(137,"div",7)(138,"span",8),t.nrm(139,"i",78),t.k0s(),t.nrm(140,"input",79),t.k0s()(),t.j41(141,"div",76)(142,"label",80),t.EFF(143,"Compra Anterior"),t.k0s(),t.j41(144,"div",7)(145,"span",8),t.nrm(146,"i",78),t.k0s(),t.nrm(147,"input",81),t.k0s()(),t.j41(148,"div",76)(149,"label",82),t.EFF(150,"Promedio"),t.k0s(),t.j41(151,"div",7)(152,"span",8),t.nrm(153,"i",78),t.k0s(),t.nrm(154,"input",83),t.k0s()(),t.j41(155,"div",76)(156,"label",84),t.EFF(157,"% Ventas"),t.k0s(),t.j41(158,"div",7),t.nrm(159,"input",85),t.j41(160,"span",8),t.EFF(161,"%"),t.k0s()()()(),t.j41(162,"h6",86),t.EFF(163,"Precio"),t.k0s(),t.j41(164,"div",44)(165,"div",87)(166,"label",88),t.EFF(167,"Venta"),t.k0s(),t.j41(168,"div",7)(169,"span",8),t.nrm(170,"i",78),t.k0s(),t.nrm(171,"input",89),t.k0s()(),t.j41(172,"div",87)(173,"label",90),t.EFF(174,"M\xednimo"),t.k0s(),t.j41(175,"div",7)(176,"span",8),t.nrm(177,"i",78),t.k0s(),t.nrm(178,"input",91),t.k0s()(),t.j41(179,"div",87)(180,"label",92),t.EFF(181,"Actualizada"),t.k0s(),t.nrm(182,"input",93),t.k0s()()()(),t.j41(183,"div",44)(184,"div",94)(185,"div",0)(186,"div",43)(187,"h5",2),t.EFF(188,"Existencia"),t.k0s()(),t.j41(189,"div",3)(190,"div",44)(191,"div",87)(192,"label",95),t.EFF(193,"En Almac\xe9n"),t.k0s(),t.nrm(194,"input",96),t.k0s(),t.j41(195,"div",87)(196,"label",97),t.EFF(197,"M\xednima"),t.k0s(),t.nrm(198,"input",98),t.k0s(),t.j41(199,"div",87)(200,"label",99),t.EFF(201,"M\xednima venta"),t.k0s(),t.nrm(202,"input",100),t.k0s()()()()(),t.j41(203,"div",94)(204,"div",0)(205,"div",43)(206,"h5",2),t.EFF(207,"Inventario"),t.k0s()(),t.j41(208,"div",3)(209,"div",44)(210,"div",101)(211,"label",102),t.EFF(212,"Fecha"),t.k0s(),t.nrm(213,"input",103),t.k0s(),t.j41(214,"div",101)(215,"label",104),t.EFF(216,"Cantidad"),t.k0s(),t.nrm(217,"input",105),t.k0s()()()()()(),t.j41(218,"div",106)(219,"button",107),t.EFF(220,"Cancelar"),t.k0s(),t.j41(221,"button",108),t.nrm(222,"i",109),t.EFF(223,"Guardar "),t.k0s()()()()()()()),2&n&&(t.R7$(39),t.Y8G("ngForOf",e.invenarioList),t.R7$(3),t.AVh("disabled",1===e.currentPage),t.R7$(4),t.AVh("disabled",1===e.currentPage),t.R7$(4),t.Y8G("ngForOf",e.pages),t.R7$(3),t.Lme("",e.currentPage," / ",e.totalPages,""),t.R7$(1),t.AVh("disabled",e.currentPage===e.totalPages),t.R7$(4),t.AVh("disabled",e.currentPage===e.totalPages),t.R7$(9),t.SpI(" ",e.tituloModalProducto," "),t.R7$(3),t.Y8G("formGroup",e.formularioInventario),t.R7$(16),t.SpI(" ",e.remainingChars," caracteres restantes "),t.R7$(31),t.Y8G("ngForOf",e.grupomercList))},dependencies:[p.Sq,s.qT,s.xH,s.y7,s.me,s.Q0,s.wz,s.BC,s.cb,s.tU,s.j4,s.JD],styles:[".row[_ngcontent-%COMP%]{margin-bottom:5px}.card-body-custom[_ngcontent-%COMP%]{background-color:#b2bec3}.modal-ancho[_ngcontent-%COMP%]{max-width:65%!important}"]})}}return r})()}];let C=(()=>{class r{static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275mod=t.$C({type:r})}static{this.\u0275inj=t.G2t({imports:[b.iI.forChild(P),b.iI]})}}return r})(),y=(()=>{class r{static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275mod=t.$C({type:r})}static{this.\u0275inj=t.G2t({imports:[p.MD,C,s.X1,s.YN]})}}return r})()}}]);